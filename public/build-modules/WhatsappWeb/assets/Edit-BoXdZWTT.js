import{k as z,T as E,q as P,p as W,r as L,c as m,o as c,b as a,F as p,g as v,d as D,a as _,u as r,f as k,n as R,t as d,i as U,e as x,j as q,x as A,h as $}from"./app-B4kV47qU.js";import{_ as V}from"./InputField-DXo1g-Zb.js";import{_ as J}from"./SpinnerBtn-B3fjBeDL.js";import{_ as G}from"./UserLayout-DG2qUs8x.js";import H from"./TemplatePreview-BCVClSSu.js";import{_ as K}from"./ShortCodes-4WIx1doN.js";import"./sharedComposable-VJJUONp6.js";import"./toastComposable-CvcyPmJb.js";import"./Modal-ChMy0A7y.js";import"./modalStore-BgORG3Nn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-Cfx6wOd2.js";import"./AssetModal-vtiWQmiY.js";import"./IntersectionObserver-DbdokySM.js";import"./assetStore-cDK0Afhq.js";const Q={class:"card flex max-w-max flex-wrap gap-2 rounded-lg bg-gray-100 p-1 dark:bg-gray-800"},X=["onClick"],Y={class:"text-xs md:text-sm"},Z={class:"mt-4 grid grid-cols-1 place-items-start gap-10 md:grid-cols-12"},ee={class:"card card-body md:col-span-9"},te={key:0},ae={class:"label mb-1 capitalize"},oe=["accept","onInput"],ne={key:1},le={class:"label mb-1 capitalize"},se=["onUpdate:modelValue","checked"],re={key:3},ce={class:"label mb-1 block capitalize"},me=["onUpdate:modelValue","placeholder"],ie=["onClick","disabled"],ue={class:"flex justify-end"},pe={key:4},de={key:5},be={class:"label mb-1 block capitalize"},_e={key:0},he=["onClick"],ge=["onUpdate:modelValue","name"],ye={class:"flex justify-end"},ve={class:"w-full md:col-span-3"},ke={class:"whatsapp-chat-body relative h-[35rem] rounded-xl border-2 border-dark-400 outline outline-4 outline-dark-500 dark:border-dark-800 dark:outline-dark-950"},xe={class:"absolute bottom-3 left-4 w-10/12 rounded-lg bg-white p-1 dark:bg-dark-700 xl:w-8/12"},ze=Object.assign({layout:G},{__name:"Edit",props:["template"],setup(w){const h=w,b=z(h.template.type??"text"),t=E({name:"",type:"text",meta:{},_method:"put"}),C=[{label:"Text Message",value:"text"},{label:"Text With image",value:"image"},{label:"Text With video",value:"video"},{label:"Audio Message",value:"audio"},{label:"Send Location",value:"location"},{label:"Poll Message",value:"poll"},{label:"Document Message",value:"document"}],S={text:{text:""},poll:{name:"",values:["",""],selectableCount:1},video:{video:null,caption:"",gifPlayback:!0},image:{image:null,caption:""},audio:{audio:null},location:{latitude:"",longitude:""},document:{document:null,caption:""}},T=l=>{t.type=l,t.meta=JSON.parse(JSON.stringify(S[l]))},M=()=>{t.post(route("user.whatsapp-web.templates.update",h.template.id))};P(b,T),W(()=>{t.name=h.template.name,t.type=h.template.type,t.meta=h.template.meta});const F=(l,o)=>{const i=l.target.files[0];if(i){t.meta[o]=i;const s=URL.createObjectURL(i);o==="document"&&(t.meta.document_name=i.name),["video","image","audio"].includes(o)&&(t.meta[`${o}Url`]=s)}},g=(l,o)=>l==="values"?"array":["video","image","audio","document"].includes(l)?"file":typeof o=="boolean"||l==="gifPlayback"?"checkbox":typeof o=="number"?"number":["latitude","longitude","name","caption"].includes(l)?"input":l==="text"?"textarea":"input",O=()=>{t.meta.values.push("")},B=l=>{t.meta.values.splice(l,1)},N=(l,o)=>{const i=document.querySelector(`textarea[name="meta.${l}"]`);if(!i)return;const s=i.selectionStart,e=i.selectionEnd,n=t.meta[l].substring(s,e),u=n.startsWith(o)&&n.endsWith(o),y=u?n.slice(o.length,-o.length):o+n+o;t.meta[l]=t.meta[l].substring(0,s)+y+t.meta[l].substring(e);const I=s+(u?-o.length:o.length),j=e+(u?-o.length:o.length);i.setSelectionRange(I,j)},f=[{label:"Italic",symbol:"_"},{label:"Monospace",symbol:"```"},{label:"Strike",symbol:"~"},{label:"Bold",symbol:"*"}];return(l,o)=>{const i=L("Icon");return c(),m(p,null,[a("div",Q,[(c(),m(p,null,v(C,s=>(c(),m(p,{key:s.value},[s.value==w.template.type?(c(),m("button",{key:0,class:R(["btn-xs flex-1 whitespace-nowrap rounded-md px-8 py-2 hover:bg-primary-100 dark:hover:bg-primary-700/50 md:flex-initial",{"bg-primary-600 text-white hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800":s.value===b.value,"bg-white text-gray-700 dark:bg-gray-700 dark:text-gray-200":s.value!==b.value}]),onClick:e=>b.value=s.value},[a("span",Y,d(s.label),1)],10,X)):k("",!0)],64))),64))]),a("div",Z,[a("div",ee,[a("form",{onSubmit:D(M,["prevent"]),class:"space-y-2"},[_(V,{modelValue:r(t).name,"onUpdate:modelValue":o[0]||(o[0]=s=>r(t).name=s),label:"Name"},null,8,["modelValue"]),(c(!0),m(p,null,v(r(t).meta,(s,e)=>(c(),m(p,{key:e},[g(e,s)==="file"?(c(),m("div",te,[a("label",ae,d(e),1),a("input",{type:"file",accept:`${e}/*`,onInput:n=>F(n,e),class:"input"},null,40,oe)])):g(e,s)==="checkbox"?(c(),m("div",ne,[a("label",le,[x(a("input",{type:"checkbox","onUpdate:modelValue":n=>r(t).meta[e]=n,class:"mr-2",checked:r(t).meta[e]==1},null,8,se),[[A,r(t).meta[e]]]),q(" "+d(e),1)])])):g(e,s)==="number"?(c(),U(V,{key:2,modelValue:r(t).meta[e],"onUpdate:modelValue":n=>r(t).meta[e]=n,label:e.charAt(0).toUpperCase()+e.slice(1),type:"number",step:"any"},null,8,["modelValue","onUpdate:modelValue","label"])):g(e,s)==="array"?(c(),m("div",re,[a("label",ce,d(e),1),(c(!0),m(p,null,v(r(t).meta[e],(n,u)=>(c(),m("div",{key:u,class:"mb-2 flex items-center"},[x(a("input",{"onUpdate:modelValue":y=>r(t).meta[e][u]=y,type:"text",placeholder:`Option ${u+1}`,class:"input mr-2"},null,8,me),[[$,r(t).meta[e][u]]]),a("button",{type:"button",onClick:y=>B(u),class:"btn btn-danger py-2",disabled:r(t).meta[e].length<=2},[_(i,{icon:"bx:trash",class:"text-lg"})],8,ie)]))),128)),a("div",ue,[a("button",{type:"button",onClick:O,class:"btn btn-primary py-1"},[_(i,{icon:"bx:plus"}),a("span",null,d(l.trans("Option")),1)])])])):g(e,s)==="input"?(c(),m("div",pe,[e!==`${b.value}Url`&&e!==`${b.value}_name`?(c(),U(V,{key:0,modelValue:r(t).meta[e],"onUpdate:modelValue":n=>r(t).meta[e]=n,label:e,placeholder:`Enter ${e}`},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])):k("",!0)])):(c(),m("div",de,[a("label",be,d(e),1),e==="text"?(c(),m("div",_e,[(c(),m(p,null,v(f,n=>a("button",{key:n.label,type:"button",class:"btn btn-outline-primary btn-xs mr-2",onClick:u=>N(e,n.symbol)},d(n.label),9,he)),64))])):k("",!0),x(a("textarea",{"onUpdate:modelValue":n=>r(t).meta[e]=n,name:`meta.${e}`,class:"textarea mt-2"},null,8,ge),[[$,r(t).meta[e]]]),_(K,{modelValue:r(t).meta[e],"onUpdate:modelValue":n=>r(t).meta[e]=n},null,8,["modelValue","onUpdate:modelValue"])]))],64))),128)),a("div",ye,[_(J,{"btn-text":"Submit",type:"submit",class:"btn btn-primary mt-4",processing:r(t).processing},null,8,["processing"])])],32)]),a("div",ve,[a("div",ke,[a("div",xe,[_(H,{template:r(t)},null,8,["template"])])])])])],64)}}});export{ze as default};
