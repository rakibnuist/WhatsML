import{p as $,c as l,o as a,F as v,h as m,g as h,t as c,d as r,n as S,j as T,r as D,k as _,w as E,f as O,u as w,v as M}from"./app-fEKA3BkQ.js";import{_ as C}from"./PageHeader-DmRLoM5E.js";import{_ as B}from"./SpinnerBtn-BezRkGQj.js";import{u as N}from"./Index-B49I3IHb.js";import{_ as U}from"./CreateForm-Bef851jc.js";import b from"./InteractiveMessage-GTvMPNF-.js";import{_ as R}from"./TemplateComponent-B5sKuil9.js";import"./assetStore-BSVLrDIW.js";import"./UserLayout-D_lxcpvH.js";import"./ValidationErrors-B24rcOPH.js";import"./echoServiceComposable-DxEMrh9X.js";import"./dynamic-import-helper-BheWnx7M.js";import"./moment-BAtM24Ew.js";import"./MultiSelect-D4amtqCA.js";import"./NoDataFound-Xi4CpDbx.js";import"./ShortCodes-DozWnzPr.js";import"./InputField-ByPNVu2m.js";import"./AssetInput-EWE_Aw8o.js";import"./InputField-C_K5Mgww.js";const A={class:"rounded-md bg-slate-100 p-4 dark:bg-dark-900"},P={key:0,class:"mb-2 font-bold",id:"headerText"},V=["src"],Y=["href"],j={key:1,id:"bodyText",class:"mb-2 py-1 text-[12px] font-light"},H={key:2,class:"text-[11px] font-light"},z={key:3,class:"border-t dark:border-dark-700"},F=["href"],L={key:1,href:"",class:"w-full text-center text-sm font-normal text-primary-400 hover:text-primary-600"},q={key:2,href:"",class:"w-full text-center text-sm font-normal text-primary-400 hover:text-primary-600"},G={key:3,href:"",class:"w-full text-center text-sm font-normal text-primary-400 hover:text-primary-600"},X={__name:"Preview",props:{templateData:{type:Array,default:[]},updatedTemplateSecret:{type:Object,default:{HEADER:null,BODY:[],BUTTONS:{URL:null,COPY_CODE:null}}}},setup(g){const o=g,u=$(()=>(t,p=null)=>{var e,d;if(t&&t.type=="BODY"){let n=t.text;return t&&o.updatedTemplateSecret&&o.updatedTemplateSecret[t.type]&&!((e=o.updatedTemplateSecret[t.type])!=null&&e.length)||(d=o.updatedTemplateSecret[t.type])==null||d.map((f,y)=>{n=n.replace(`{{${y+1}}}`,f)}),n}else if((t==null?void 0:t.type)=="BUTTONS"&&p){if(!o.updatedTemplateSecret[t.type])return"";if(!o.updatedTemplateSecret[t.type][p.type])return p[p.type]??""}else if(t&&t.type=="HEADER"){let n=t.text;return o.updatedTemplateSecret[t.type]?n.replace("{{1}}",o.updatedTemplateSecret[t.type]):n}return""});return(t,p)=>(a(),l("div",A,[(a(!0),l(v,null,m(g.templateData,(e,d)=>{var n,f,y,i,x;return a(),l(v,{key:d},[e.type==="HEADER"?(a(),l(v,{key:0},[e.format==="TEXT"&&(e!=null&&e.text)?(a(),l("p",P,c(u.value(e)),1)):e.format==="IMAGE"&&((n=e==null?void 0:e.example)!=null&&n.header_handle[0])?(a(),l("img",{key:1,src:(f=e==null?void 0:e.example)==null?void 0:f.header_handle[0],class:"h-36 w-full rounded object-cover",alt:""},null,8,V)):e.format==="DOCUMENT"&&((y=e==null?void 0:e.example)!=null&&y.header_handle[0])?(a(),l("a",{key:2,href:(i=e==null?void 0:e.example)==null?void 0:i.header_handle[0],target:"_blank",rel:"noopener noreferrer",class:"flex items-center justify-between gap-3 rounded bg-gray-100 p-3"},p[0]||(p[0]=[r("i",{class:"bx bx-file"},null,-1),r("span",{class:"text-cyan-600"},"Click",-1)]),8,Y)):h("",!0)],64)):h("",!0),e.type==="BODY"?(a(),l("p",j,c(u.value(e)),1)):h("",!0),e.type==="FOOTER"&&(e!=null&&e.text)?(a(),l("p",H,c(e.text),1)):h("",!0),(e==null?void 0:e.type)==="BUTTONS"&&((x=e==null?void 0:e.buttons)!=null&&x.length)?(a(),l("ul",z,[(a(!0),l(v,null,m(e==null?void 0:e.buttons,(s,k)=>(a(),l("li",{key:k,class:S([{"border-b dark:border-dark-700":k!==(e==null?void 0:e.buttons.length)-1},"px-1 py-2 text-center"])},[s.type==="URL"?(a(),l("a",{key:0,href:t.sanitizeUrl(u.value(e,s)),class:"w-full text-center text-sm font-normal text-primary-400 hover:text-primary-600"},[p[1]||(p[1]=r("i",{class:"fa-solid fa-pen-to-square"},null,-1)),T(" "+c(s==null?void 0:s.text),1)],8,F)):s.type==="PHONE_NUMBER"?(a(),l("a",L,[p[2]||(p[2]=r("i",{class:"fa-solid fa-phone"},null,-1)),T(" "+c(s==null?void 0:s.text),1)])):s.type==="COPY_CODE"?(a(),l("a",q,c(s==null?void 0:s.text),1)):(a(),l("a",G,c(s==null?void 0:s.text),1))],2))),128))])):h("",!0)],64)}),128))]))}},J={class:"h-[calc(100vh-5rem)] space-y-2 overflow-y-auto"},K={class:"mt-3 p-1"},Q={class:"grid grid-cols-1 place-items-start gap-4 lg:grid-cols-3"},W={class:"col-span-full w-full lg:col-span-2"},Z={class:"group mb-5 flex items-center rounded-lg dark:bg-slate-700"},I=["value"],ee={class:"styled-scrollbar h-[calc(100vh-10rem)] overflow-y-auto"},te={class:"col-span-full w-full rounded-md bg-slate-200 p-2 dark:bg-dark-800 lg:col-span-1"},ae={class:"my-4"},se={class:"card-body whatsapp-chat-body"},le={class:"card-footer"},$e={__name:"TemplateModal",setup(g){const o=N(),u=D(""),t=$(()=>o.chatTemplates.find(e=>e.id===u.value)),p=()=>{o.inputMessage.type="template",o.inputMessage.template=t.value,o.submitMessage()};return(e,d)=>(a(),_(C,{"header-state":!0,"header-title":"Message Template",state:"whatsappTemplateModal","state-key":"whatsappTemplateModal",modalSize:"w-full h-full"},{default:E(()=>{var n,f,y,i,x;return[r("div",J,[r("div",K,[r("div",Q,[r("div",W,[r("div",Z,[O(r("select",{"onUpdate:modelValue":d[0]||(d[0]=s=>u.value=s),class:"select w-full"},[d[1]||(d[1]=r("option",{value:""},"Choose Template",-1)),(a(!0),l(v,null,m(w(o).getActiveModuleTemplates,s=>(a(),l("option",{key:s.id,value:s.id},c(s.name),9,I))),128))],512),[[M,u.value]])]),r("div",ee,[((n=t.value)==null?void 0:n.type)=="interactive"?(a(),_(U,{key:0,meta:t.value.meta,preview:!1},null,8,["meta"])):(a(),_(R,{key:1,components:(f=t.value)==null?void 0:f.meta.components},null,8,["components"]))])]),r("div",te,[r("p",ae,c(e.trans("Preview")),1),r("div",se,[((y=t.value)==null?void 0:y.type)=="interactive"?(a(),_(b,{key:0,components:t.value.meta},null,8,["components"])):(a(),_(X,{key:1,templateData:(i=t.value)==null?void 0:i.meta.components},null,8,["templateData"]))]),r("div",le,[(x=t.value)!=null&&x.id?(a(),_(B,{key:0,onClick:p,type:"button",processing:w(o).loading.sendingMessage,class:"btn btn-primary float-right mt-2","btn-text":"Send"},null,8,["processing"])):h("",!0)])])])])])]}),_:1}))}};export{$e as default};
