import{e as H}from"./PageHeader-DmRLoM5E.js";import{_ as D}from"./AssetInput-EWE_Aw8o.js";import{a as F}from"./assetStore-BSVLrDIW.js";import{_ as O}from"./ShortCodes-DozWnzPr.js";import{_}from"./InputField-C_K5Mgww.js";import{r as N,p as X,c as o,o as a,b as i,F as y,h as m,g as p,d as r,t as v,k as A,j as Y}from"./app-fEKA3BkQ.js";const z={key:0,class:"mb-5 rounded-lg border dark:border-dark-700"},G={class:"rounded-b-none rounded-t-lg border-b bg-slate-100 px-2 py-2 text-center dark:border-dark-700 dark:bg-dark-800"},Q={class:"p-3"},W={key:0,class:"mb-3 px-2"},q={class:"flex items-center gap-3"},J={key:1,class:"mb-3 px-2"},Z={key:1,class:"mb-5 rounded-lg border dark:border-dark-700"},K={class:"mb-3 px-2"},I={class:"flex items-center gap-3"},ee=["innerHTML"],le={key:2,class:"mb-5 rounded-lg border dark:border-dark-700"},se={class:"rounded-b-none rounded-t-lg border-b bg-slate-100 px-2 py-2 text-center dark:border-dark-700 dark:bg-dark-800"},ae={class:"mb-2 text-center"},re={key:0,class:"btn btn-primary",type:"button"},oe=["href"],de={key:0,class:"mb-2 grid grid-cols-3 items-center gap-3"},te={class:"col-span-1 whitespace-nowrap text-sm font-semibold"},pe={class:"col-span-2 flex w-full items-center gap-1"},ne={key:0,class:"text-end"},ie={key:1,class:"mb-2 grid grid-cols-2 items-center gap-3"},ce={key:2,class:""},ue={class:"mb-2 grid grid-cols-2 items-center gap-3"},_e={class:"flex flex-col gap-2"},ye={class:"flex items-center justify-between"},ve={class:"flex items-center justify-between"},he={class:"text-sm font-medium"},ge=["onClick"],ke={class:"my-3"},xe={class:"flex gap-2"},fe=["onClick"],me={key:0,class:"mt-3 flex justify-end py-1"},Ve=["onClick"],Ce={__name:"TemplateComponent",props:{components:{type:Object,default:[]},errors:{type:Object,default:{}}},setup(T){const j=F(),h=T,g=N({thumbnail_id:"",sections:[{title:"",product_items:[{product_retailer_id:""}]}]});j.loadAssets("image");const P=(d,s)=>{const l=h.components[arrayPosition];l.format!="TEXT"?b.value[l.type]=s.target.files[0]:b.value[l.type]=s},M=(d,s=0)=>{d=="section"?g.value.sections.push({title:"",product_items:[{product_retailer_id:""}]}):g.value.sections[s].product_items.push({product_retailer_id:""})},S=(d,s=0,l=0)=>{d=="section"?g.value.sections.splice(s,1):g.value.sections[s].product_items.splice(l,1)},u=X(()=>d=>h.errors&&h.errors[d]?(console.log(h.errors[d]),Array.isArray(h.errors[d])?h.errors[d][0]:h.errors[d]):""),b=N({}),R=d=>{const s=d.url.split("{{")[0];return d.example[0].startsWith(s)&&(d.example[0]=""),d.url};return(d,s)=>(a(),o(y,null,[(a(!0),o(y,null,m(T.components,(l,x)=>{var $,C,B,L,w,E;return a(),o("div",{class:"space-y-3",key:x},[l.type=="HEADER"&&(($=l==null?void 0:l.example)!=null&&$.header_text)||(C=l==null?void 0:l.example)!=null&&C.header_handle?(a(),o("div",z,[r("p",G,v(d.trans("Header"))+" ("+v(l.format)+") ",1),r("div",Q,[l.format=="TEXT"?(a(),o("div",W,[r("div",q,[s[3]||(s[3]=r("span",{class:"whitespace-nowrap",innerHTML:"{{1}}"},null,-1)),i(_,{modelValue:l.example.header_text[x],"onUpdate:modelValue":e=>l.example.header_text[x]=e,validationMessage:u.value("meta.0.example.header_text.0"),placeholder:"Enter Text"},null,8,["modelValue","onUpdate:modelValue","validationMessage"])]),i(O,{onSetShortCode:e=>l.example.header_text[x]+=` ${e}`},null,8,["onSetShortCode"])])):(B=l==null?void 0:l.example)!=null&&B.header_handle?(a(),o("div",J,[i(D,{type:(L=l.format)==null?void 0:L.toLowerCase(),modelValue:l.example.header_handle[x],"onUpdate:modelValue":e=>l.example.header_handle[x]=e,error:u.value("meta.0.example.header_handle.0")},null,8,["type","modelValue","onUpdate:modelValue","error"])])):(a(),A(_,{key:2,onInput:e=>P(e.target,l),placeholder:"Enter File Url"},null,8,["onInput"]))])])):p("",!0),(l==null?void 0:l.type)=="BODY"&&((w=l==null?void 0:l.example)!=null&&w.body_text[0])?(a(),o("div",Z,[s[4]||(s[4]=r("p",{class:"rounded-b-none rounded-t-lg border-b bg-slate-100 px-2 py-2 text-center dark:border-dark-700 dark:bg-dark-800"}," Body ",-1)),(a(!0),o(y,null,m((E=l.example)==null?void 0:E.body_text[0],(e,c)=>(a(),o("div",{key:c,class:"form-group mt-3"},[r("div",K,[r("div",I,[r("span",{class:"whitespace-nowrap",innerHTML:`{{${c+1}}}`},null,8,ee),i(_,{modelValue:l.example.body_text[0][c],"onUpdate:modelValue":f=>l.example.body_text[0][c]=f,placeholder:e,validationMessage:u.value(`meta.1.example.body_text.0.${c}`)},null,8,["modelValue","onUpdate:modelValue","placeholder","validationMessage"])]),i(O,{onSetShortCode:f=>l.example.body_text[0][c]+=` ${f}`},null,8,["onSetShortCode"])])]))),128))])):p("",!0),(l==null?void 0:l.type)=="BUTTONS"?(a(),o("div",le,[l!=null&&l.buttons.length?(a(),o(y,{key:0},[r("p",se,v(d.trans("Buttons")),1),(a(!0),o(y,null,m(l==null?void 0:l.buttons,(e,c)=>{var f;return a(),o("div",{class:"mt-4 px-3",key:c},[r("div",ae,[["QUICK_REPLY","VOICE_CALL"].includes(e==null?void 0:e.type)?(a(),o("button",re,v(e==null?void 0:e.text),1)):(e==null?void 0:e.type)=="URL"?(a(),o("a",{key:1,href:e.url,target:"_blank",class:"btn btn-primary"},v(e==null?void 0:e.text),9,oe)):p("",!0)]),e!=null&&e.example&&((f=e==null?void 0:e.example)!=null&&f.length)?(a(),o("div",de,[r("p",te,v(e==null?void 0:e.text),1),r("div",pe,[(e==null?void 0:e.type)=="URL"?(a(),o("div",ne,v(R(e)),1)):p("",!0),(a(!0),o(y,null,m(e==null?void 0:e.example,(n,t)=>(a(),A(_,{key:t,placeholder:n,customStyle:{"col-span-2":(e==null?void 0:e.type)!="URL"},modelValue:e.example[t],"onUpdate:modelValue":k=>e.example[t]=k,validationMessage:u.value(`meta.3.buttons.${c}.example.${t}`)},null,8,["placeholder","customStyle","modelValue","onUpdate:modelValue","validationMessage"]))),128))])])):p("",!0),e.type==="CATALOG"?(a(),o("div",ie,[s[5]||(s[5]=r("p",{class:"whitespace-nowrap text-sm font-semibold"},"Thumbnail Product Retailer Id",-1)),i(_,{placeholder:"Example: 2lc20305pt",modelValue:b.value.buttons,"onUpdate:modelValue":s[0]||(s[0]=n=>b.value.buttons=n),validationMessage:u.value(`meta.BUTTONS.${e.type}.thumbnail_product_retailer_id`)},null,8,["modelValue","validationMessage"])])):p("",!0),e.type==="MPM"?(a(),o("div",ce,[r("div",ue,[s[6]||(s[6]=r("p",{class:"whitespace-nowrap text-sm font-semibold"},"Thumbnail Product Retailer Id",-1)),i(_,{placeholder:"Example: 2lc20305pt",modelValue:g.value.thumbnail_id,"onUpdate:modelValue":s[1]||(s[1]=n=>g.value.thumbnail_id=n),validationMessage:u.value(`meta.BUTTONS.${e.type}.thumbnail_id`)},null,8,["modelValue","validationMessage"])]),r("div",_e,[r("div",ye,[s[8]||(s[8]=r("label",{class:"label mb-1 capitalize"},"Section List",-1)),r("button",{onClick:s[2]||(s[2]=n=>M("section")),type:"button",class:"btn btn-primary btn-sm"},s[7]||(s[7]=[r("i",{class:"bx bx-plus"},null,-1),Y(" Add Section ",-1)]))]),(a(!0),o(y,null,m(g.value.sections,(n,t)=>(a(),o("div",{key:t,class:"rounded-lg border-t-2 border-purple-400 p-2"},[r("div",ve,[r("label",he,"Section "+v(t+1),1),t!=0?(a(),o("button",{key:0,type:"button",onClick:k=>S("section",t),class:"text-red-600 hover:text-red-700"},s[9]||(s[9]=[r("i",{class:"bx bx-trash"},null,-1)]),8,ge)):p("",!0)]),r("div",ke,[i(_,{class:"mb-4",placeholder:"Section title",modelValue:n.title,"onUpdate:modelValue":k=>n.title=k,validationMessage:u.value(`meta.BUTTONS.${e.type}.sections.${t}.title`)},null,8,["modelValue","onUpdate:modelValue","validationMessage"]),(a(!0),o(y,null,m(n.product_items,(k,V)=>(a(),o("div",{key:V,class:"my-3"},[r("div",xe,[i(_,{placeholder:"Product retail id: 2lc20305pt",modelValue:k.product_retailer_id,"onUpdate:modelValue":U=>k.product_retailer_id=U,validationMessage:u.value(`meta.BUTTONS.${e.type}.sections.${t}.product_items.${V}.product_retailer_id`)},null,8,["modelValue","onUpdate:modelValue","validationMessage"]),V!=0?(a(),o("div",{key:0,onClick:U=>S("row",t,V),class:"cursor-pointer text-xl text-red-600 hover:text-red-700"},s[10]||(s[10]=[r("i",{class:"bx bx-trash"},null,-1)]),8,fe)):p("",!0)]),V+1===n.product_items.length?(a(),o("div",me,[r("button",{onClick:U=>M("item",t),type:"button",class:"btn btn-primary"},s[11]||(s[11]=[r("i",{class:"bx bx-plus"},null,-1)]),8,Ve)])):p("",!0)]))),128))])]))),128))])])):p("",!0)])}),128))],64)):p("",!0)])):p("",!0)])}),128)),i(H)],64))}};export{Ce as _};
