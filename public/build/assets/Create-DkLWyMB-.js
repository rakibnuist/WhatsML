import{m as M,c as u,o as c,i as h,a as r,t as y,p as $,n as F,d as T,T as N,q as E,k as I,b as s,u as t,F as w,g as S,l as q,v as A,x as B}from"./app-CHoD4jNo.js";import{_ as j}from"./SpinnerBtn-DagqeiVX.js";import{_ as b}from"./InputField-B9CnVxof.js";import{S as V}from"./SelectField-BpH9cH4J.js";import{_ as U}from"./InputImage-D0V2OZJA.js";import{_ as D}from"./AdminLayout-Ddg1XhLg.js";import{_ as R}from"./InputFieldError-DJP3I4Ws.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AssetModal-Dh3z8yqV.js";import"./ToastrContainer-DreH4TsU.js";const O={key:0,class:"label mb-1"},z=["type","value","placeholder","required","step"],L={key:1,class:"my-1 text-[11px] font-light text-danger-600"},W={__name:"TextareaField",props:{label:{type:String,default:""},customStyle:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},validationMessage:{type:[String,Array],default:""},placeholder:{type:String,default:"Example: text..."},isRequired:{type:Boolean,default:!1},step:{type:String,default:"any"},attrs:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(d,{emit:a}){const v=d,e=a,n=M(()=>v.validationMessage&&Array.isArray(v.validationMessage)?v.validationMessage[0]:v.validationMessage),_=f=>{e("update:modelValue",f.target.value)};return(f,x)=>(c(),u("div",{class:F(["w-full",d.customStyle])},[d.label?(c(),u("label",O,y(f.trans(d.label)),1)):h("",!0),r("textarea",$({type:d.type,value:d.modelValue,onInput:_,class:["input",{"border border-danger-600":n.value}],placeholder:d.placeholder,required:d.isRequired,step:d.step},d.attrs),null,16,z),n.value?(c(),u("div",L,y(n.value),1)):h("",!0)],2))}},X={class:"mx-auto lg:w-9/12"},G={class:"card"},H={class:"card-header"},J={class:"card-title"},K={class:"card-body"},Q={class:"space-y-2"},Y={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Z={key:0,class:"card"},ee={class:"card-body"},te={class:"grid grid-cols-4 gap-2"},le={class:"card"},oe={class:"card-body"},re={class:"flex justify-between"},ae=["onClick"],se={class:"card"},de={class:"card-body"},ie={class:"mb-2"},ne={class:"mb-3 flex flex-wrap items-center gap-1"},me=["onClick"],pe={class:"mb-2"},ue=T({layout:D}),ke=Object.assign(ue,{__name:"Create",props:["template","aiProviders","aiModels"],setup(d){const a=d,v={type:"",name:"",placeholder:"",value:""},e=N({title:"",description:"",preview:"",icon:"",status:"",ai_model:"",fields:[{...v}],prompt:"",prompt_type:"text",credit_charge:0,meta:{provider:"",model:"",max_token:0,max_word:null},_method:"post"}),n=!!a.template;E(()=>{n&&(e.title=a.template.title,e.description=a.template.description,e.preview=a.template.preview,e.icon=a.template.icon,e.status=a.template.status,e.ai_model=a.template.ai_model,e.fields=a.template.fields,e.prompt=a.template.prompt,e.prompt_type=a.template.prompt_type,e.credit_charge=a.template.credit_charge,e.meta=a.template.meta)});const _=M(()=>(a.aiModels??[]).filter(i=>i.provider===e.meta.provider)??[]),f=()=>{e.fields.push({...v})},x=i=>{e.fields.splice(i,1)},C=()=>{e._method=n?"put":"post",e.post(n?route("admin.ai-templates.update",a.template.id):route("admin.ai-templates.store"))},g=I(),P=i=>{let o=g.value.selectionStart;console.log(o);let l=e.prompt;e.prompt=l.slice(0,o)+i+l.slice(o);let m=o+i.length;setTimeout(()=>{var p,k;(p=g.value)==null||p.setSelectionRange(m,m),(k=g.value)==null||k.focus()},100)};return(i,o)=>(c(),u("div",X,[r("form",{onSubmit:B(C,["prevent"]),class:"space-y-4"},[r("div",G,[r("div",H,[r("div",J,y(n?i.trans("Edit Template"):i.trans("Create New Template")),1)]),r("div",K,[r("div",Q,[s(b,{modelValue:t(e).title,"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).title=l),label:"Title",error:t(e).errors.title},null,8,["modelValue","error"]),s(W,{modelValue:t(e).description,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).description=l),label:"Description",error:t(e).errors.description},null,8,["modelValue","error"]),r("div",Y,[s(U,{modelValue:t(e).icon,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).icon=l),label:"Icon",error:t(e).errors.icon},null,8,["modelValue","error"]),s(U,{modelValue:t(e).preview,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).preview=l),label:"Preview",error:t(e).errors.preview},null,8,["modelValue","error"]),s(V,{label:"Status",options:["active","draft"],modelValue:t(e).status,"onUpdate:modelValue":o[4]||(o[4]=l=>t(e).status=l),error:t(e).errors.status},null,8,["modelValue","error"]),s(b,{type:"number",modelValue:t(e).credit_charge,"onUpdate:modelValue":o[5]||(o[5]=l=>t(e).credit_charge=l),label:"Credit Charge",error:t(e).errors.credit_charge},null,8,["modelValue","error"])])])])]),t(e).prompt_type=="text"?(c(),u("div",Z,[r("div",ee,[r("div",te,[s(V,{label:"Ai Provider",placeholder:"Select Provider",modelValue:t(e).meta.provider,"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).meta.provider=l),"option-label":"title","option-value":"id",options:d.aiProviders,error:t(e).errors["meta.provider"]},null,8,["modelValue","options","error"]),s(V,{label:"Ai Model",modelValue:t(e).meta.model,"onUpdate:modelValue":o[7]||(o[7]=l=>t(e).meta.model=l),"option-label":"name","option-value":"id",placeholder:"Select Model",options:_.value,error:t(e).errors["meta.model"]},null,8,["modelValue","options","error"]),s(b,{type:"number",modelValue:t(e).meta.max_token,"onUpdate:modelValue":o[8]||(o[8]=l=>t(e).meta.max_token=l),label:"Max Token",error:t(e).errors.max_token},null,8,["modelValue","error"]),s(b,{type:"number",modelValue:t(e).meta.max_word,"onUpdate:modelValue":o[9]||(o[9]=l=>t(e).meta.max_word=l),label:"Max Word",error:t(e).errors["meta.max_word"]},null,8,["modelValue","error"])])])])):h("",!0),r("div",le,[r("div",oe,[r("div",re,[r("h5",null,y(i.trans("Input Fields")),1),r("button",{type:"button",onClick:f,class:"btn btn-primary"},"+")]),(c(!0),u(w,null,S(t(e).fields,(l,m)=>(c(),u("div",{key:m,class:"flex flex-col justify-between gap-3 lg:flex-row lg:items-center"},[s(V,{label:"Field Type",modelValue:l.type,"onUpdate:modelValue":p=>l.type=p,options:["input","textarea"],error:t(e).errors["fields."+m+".type"]},null,8,["modelValue","onUpdate:modelValue","error"]),s(b,{label:"Field Name",modelValue:l.name,"onUpdate:modelValue":p=>l.name=p,class:"input",error:t(e).errors["fields."+m+".name"]},null,8,["modelValue","onUpdate:modelValue","error"]),s(b,{label:"Field Placeholder",modelValue:l.placeholder,"onUpdate:modelValue":p=>l.placeholder=p,class:"input",error:t(e).errors["fields."+m+".placeholder"]},null,8,["modelValue","onUpdate:modelValue","error"]),r("button",{type:"button",class:"btn btn-danger mt-6",onClick:p=>x(m)},"X",8,ae)]))),128))])]),r("div",se,[r("div",de,[r("div",ie,[o[11]||(o[11]=r("label",{class:"label"},"Prompt",-1)),q(r("textarea",{"onUpdate:modelValue":o[10]||(o[10]=l=>t(e).prompt=l),ref_key:"bodyEl",ref:g,class:"textarea"},null,512),[[A,t(e).prompt]]),s(R,{message:t(e).errors.prompt},null,8,["message"])]),r("ul",ne,[(c(!0),u(w,null,S(t(e).fields.filter(l=>l.name.length).map(l=>`[${l.name}]`),l=>(c(),u("li",{onClick:m=>P(l),key:l,class:"rounded border px-2 py-1 dark:border-dark-700 dark:bg-dark-700 dark:hover:bg-opacity-80"},y(l),9,me))),128))]),r("div",pe,[s(j,{processing:t(e).processing,"btn-text":n?i.trans("Update"):i.trans("Create")},null,8,["processing","btn-text"])])])])],32)]))}});export{ke as default};
