import{d as A,j as D,s as E,T as x,k as I,r as f,c as d,o as i,a as t,b as c,t as s,u as e,f as n,x as P,l as u,v as y,A as k,e as $,F as g,g as j,w,h as q,n as B,N as Y}from"./app-CHoD4jNo.js";import{_ as z}from"./AdminLayout-Ddg1XhLg.js";import{_ as O}from"./Paginate-BtBw_72H.js";import{h as T}from"./moment-BAtM24Ew.js";import{_ as J}from"./NoDataFound-KY-LTui4.js";import"./AssetModal-Dh3z8yqV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputFieldError-DJP3I4Ws.js";import"./ToastrContainer-DreH4TsU.js";const G={class:"space-y-2"},H={class:"dropdown","data-placement":"bottom-end"},K={class:"dropdown-toggle"},Q={type:"button",class:"btn bg-white font-medium shadow-sm dark:bg-slate-800"},R={class:"dropdown-content w-72 !overflow-visible"},W={class:"dropdown-list space-y-4 p-4"},X={class:"dropdown-list-item"},Z={class:"my-1 text-sm font-medium"},L={class:"mb-2"},tt={class:"dropdown-list-item"},et={class:"mb-2"},st={value:"email"},ot={value:"invoice_no"},nt={class:"dropdown-list-item"},at={type:"submit",class:"btn btn-primary w-full"},lt={class:"table-responsive whitespace-nowrap rounded-primary"},it={class:"table"},dt={class:"flex justify-end"},ct={key:0},rt={class:"text-primary-500"},ut={key:0},pt={key:1},_t=["href"],mt={key:1},ht={class:"text-left"},bt={class:"flex justify-end"},vt={class:"dropdown","data-placement":"bottom-start"},ft={class:"dropdown-toggle"},yt={class:"dropdown-content w-40"},wt={class:"dropdown-list"},Ct={class:"dropdown-list-item"},xt=["onClick"],kt={class:"mb-2"},gt={class:"label mb-2"},Mt={class:"mb-2"},St={class:"label mb-2"},Ft={value:"1"},Nt={value:"0"},Ut={class:"mb-2"},Vt={class:"label mb-2"},At={class:"mb-2"},Dt={class:"label mb-2"},Et=["value"],It=A({layout:z}),Gt=Object.assign(It,{__name:"Index",props:["creditLogs","per_credit_fee","totalCreditLog","activeCreditLog","inactiveCreditLog","request","type"],setup(p){const b=D(),{formatCurrency:M,textExcerpt:S}=E(),v=p,r=x({search:v.request.search,type:v.type}),_=x({per_credit_fee:v.per_credit_fee}),F=()=>{_.put(route("admin.update-credit-fee"),{onSuccess:()=>b.close("updateCreditFeeModal")})},l=I({}),N=m=>{l.value={...m},b.open("editCreditModal")},U=()=>{Y.patch(route("admin.credit-logs.update",l.value.id),l.value,{onSuccess:()=>b.open("editCreditModal")})};return(m,a)=>{const h=f("Icon"),V=f("Link"),C=f("Modal");return i(),d(g,null,[t("div",G,[t("div",H,[t("div",K,[t("button",Q,[c(h,{icon:"fe:filter"}),t("span",null,s(e(n)("Filter")),1),c(h,{icon:"bx:chevron-down"})])]),t("div",R,[t("form",{onSubmit:a[2]||(a[2]=P(o=>e(r).get("/admin/credit-logs"),["prevent"]))},[t("ul",W,[t("li",X,[t("h2",Z,s(e(n)("Status")),1),t("div",L,[u(t("input",{type:"text",name:"search","onUpdate:modelValue":a[0]||(a[0]=o=>e(r).search=o),class:"input",placeholder:"Search......"},null,512),[[y,e(r).search]])])]),t("li",tt,[t("div",et,[u(t("select",{class:"select",name:"type","onUpdate:modelValue":a[1]||(a[1]=o=>e(r).type=o)},[t("option",st,s(e(n)("User Email")),1),t("option",ot,s(e(n)("Invoice No")),1)],512),[[k,e(r).type]])])]),t("li",nt,[t("button",at,s(e(n)("Filter")),1)])])],32)])]),t("div",lt,[t("table",it,[t("thead",null,[t("tr",null,[t("th",null,s(e(n)("Invoice")),1),t("th",null,s(e(n)("User Name")),1),t("th",null,s(e(n)("Credits")),1),t("th",null,s(e(n)("Price")),1),t("th",null,s(e(n)("Status")),1),t("th",null,s(e(n)("Gateway")),1),t("th",null,s(e(n)("Comment")),1),t("th",null,s(e(n)("Attachment")),1),t("th",null,s(e(n)("Date")),1),t("th",dt,s(e(n)("Action")),1)])]),p.creditLogs.total>0?(i(),d("tbody",ct,[(i(!0),d(g,null,j(p.creditLogs.data,o=>(i(),d("tr",{key:o.id},[t("td",null,[t("p",rt,s(o.invoice_no),1)]),t("td",null,[c(V,{href:m.route("admin.users.show",o.user_id)},{default:w(()=>[q(s(e(S)(o.user.name,30)),1)]),_:2},1032,["href"])]),t("td",null,s(o.credits),1),t("td",null,s(e(M)(o.price)),1),t("td",null,[t("span",{class:B(o.status==1?"badge badge-success":"badge badge-warning")},s(o.status==1?"Complete":"Pending"),3)]),t("td",null,s(o.gateway.name),1),t("td",null,[o!=null&&o.meta?(i(),d("span",ut,s(JSON.parse(o.meta).comment),1)):(i(),d("span",pt,s(e(n)("None")),1))]),t("td",null,[o!=null&&o.meta?(i(),d("a",{key:0,href:m.sanitizeUrl(JSON.parse(o.meta).screenshot),target:"_blank"},s(e(n)("View Attachment")),9,_t)):(i(),d("span",mt,s(e(n)("None")),1))]),t("td",ht,s(e(T)(o.updated_at).format("DD MMM, YYYY")),1),t("td",null,[t("div",bt,[t("div",vt,[t("div",ft,[c(h,{class:"text-2xl",icon:"bx:dots-horizontal-rounded"})]),t("div",yt,[t("ul",wt,[t("li",Ct,[t("button",{onClick:Pt=>N(o),class:"dropdown-link"},[c(h,{icon:"fe:edit"}),t("span",null,s(e(n)("Edit")),1)],8,xt)])])])])])])]))),128))])):(i(),$(J,{key:1,"for-table":"true"}))])]),c(O,{links:p.creditLogs.links},null,8,["links"])]),c(C,{state:"updateCreditFeeModal","header-state":!0,"header-title":"Update Credit Fee","action-btn-state":!0,"action-btn-text":e(n)("Save Changes"),"action-processing":e(_).processing,onAction:F},{default:w(()=>[t("div",kt,[t("label",gt,s(e(n)("Per Credit Fee")),1),u(t("input",{"onUpdate:modelValue":a[3]||(a[3]=o=>e(_).per_credit_fee=o),type:"number",step:"any",required:"",class:"input"},null,512),[[y,e(_).per_credit_fee]])])]),_:1},8,["action-btn-text","action-processing"]),c(C,{state:"editCreditModal","header-state":!0,"header-title":"Edit Credit Fee","action-btn-state":!0,"action-btn-text":e(n)("Save Changes"),"action-processing":l.value.processing,onAction:U},{default:w(()=>[t("div",Mt,[t("label",St,s(e(n)("Status")),1),u(t("select",{"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.status=o),class:"select",name:"status"},[t("option",Ft,s(e(n)("Approved")),1),t("option",Nt,s(e(n)("Pending")),1)],512),[[k,l.value.status]])]),t("div",Ut,[t("label",Vt,s(e(n)("Credits")),1),u(t("input",{"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.credits=o),type:"number",maxlength:"500",class:"input",required:""},null,512),[[y,l.value.credits]])]),t("div",At,[t("label",Dt,s(e(n)("Payment ID")),1),t("input",{value:l.value.payment_id,type:"text",class:"input read-only:cursor-not-allowed",readonly:""},null,8,Et)])]),_:1},8,["action-btn-text","action-processing"])],64)}}});export{Gt as default};
