import{d as L,s as V,k as w,T as z,r as G,y as q,c as o,o as r,b as M,a as t,u as i,aD as U,i as m,l as c,t as e,h as d,F as p,g as x,n as $,Z as P,x as j,v as T,w as A,N as I}from"./app-CHoD4jNo.js";import{_ as O}from"./BlankLayout-BNwrpnUD.js";import"./ToastrContainer-DreH4TsU.js";const F={class:"payment-container"},Y={class:"payment-content"},Z={class:"payment-header"},E={alt:"logo"},H={class:"status"},J={class:"gateways"},K=["onClick"],Q=["src"],R=["id"],W=["onSubmit"],X={class:"payment-table"},tt={class:"text-center"},et={key:0},nt={class:"text-center"},st={key:1},lt={class:"text-center"},at={class:"text-center"},ot={class:"payment-label text-secondary-700"},rt={class:"text-secondary-700"},it={key:1},dt={class:"payment-label text-secondary-700"},ut={class:"payment-file-input"},mt={class:"payment-label text-secondary-700"},ct={class:"payment-label text-secondary-700"},pt=["disabled"],yt={class:"payment-invoice"},vt={class:"payment-border"},bt={class:"payment-border"},ht={class:"payment-details"},ft={class:"payment-table"},gt={class:"text-center"},kt={class:"text-center"},wt={class:"text-center"},Ct={class:"text-center"},_t={class:"text-center"},Mt=L({layout:O}),Nt=Object.assign(Mt,{__name:"Payment",props:["plan","gateways","tax","total","invoice_data","error","minMax","user","logo","minMaxMessage"],setup(a){var _;const{formatCurrency:y,authUser:N}=V(),f=a,v=w(((_=f.gateways[0])==null?void 0:_.id)||0),g=w(null),b=w({image:null,comment:""}),h=z({phone:N.value.phone}),S=s=>{const n=f.gateways.find(k=>k.id===s);I.post(route("user.subscription.subscribe"),{gateway_id:s,plan_id:f.plan.id,manualPayment:n.is_auto==0?b.value:null,phone:h.phone})},B=s=>{v.value=s},C=()=>{g.value.style="display: none;"};return(s,n)=>{const k=G("Link"),D=q("lazy");return r(),o(p,null,[M(i(U),{title:s.trans("Payment")},null,8,["title"]),t("div",F,[t("div",Y,[t("div",Z,[c(t("img",E,null,512),[[D,s.$page.props.primaryData.deep_logo]]),t("span",H,e(s.trans("Unpaid")),1)]),a.error?(r(),o("div",{key:0,ref_key:"alertContainer",ref:g,class:"payment-error-alert"},[t("div",null,[n[3]||(n[3]=t("i",{class:"fas fa-sad-tear"},null,-1)),t("strong",null,e(s.trans("!Opps ")),1),d(" "+e(s.trans("Transaction failed if you make payment successfully please contact us.")),1)]),t("button",{type:"button",onClick:C},n[4]||(n[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",width:"28",height:"28"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))],512)):m("",!0),a.minMax?(r(),o("div",{key:1,ref_key:"alertContainer",ref:g,class:"payment-error-alert"},[t("div",null,[n[5]||(n[5]=t("i",{class:"fas fa-sad-tear"},null,-1)),t("strong",null,e(s.trans("!Opps ")),1),d(" "+e(a.minMaxMessage),1)]),t("button",{type:"button",onClick:C},n[6]||(n[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",width:"28",height:"28"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))],512)):m("",!0),t("div",J,[(r(!0),o(p,null,x(a.gateways,l=>(r(),o("button",{key:l.id,onClick:u=>B(l.id),class:$({"payment-border":v.value==l.id})},[c(t("div",null,n[7]||(n[7]=[t("svg",{class:"active-gateway",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24"},[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})],-1)]),512),[[P,v.value==l.id]]),t("img",{src:l.logo},null,8,Q)],10,K))),128))]),(r(!0),o(p,null,x(a.gateways,l=>c((r(),o("div",{key:l.id,class:"gateway-form",id:"gateway-form"+l.id},[t("form",{method:"post",onSubmit:j(u=>S(l.id),["prevent"]),enctype:"multipart/form-data"},[t("table",X,[t("tr",null,[t("td",null,e(s.trans("Method Name: ")),1),t("td",tt,e(l.name),1)]),l.currency!=null?(r(),o("tr",et,[t("td",null,e(s.trans("Gateway Currency: ")),1),t("td",nt,e(l.currency),1)])):m("",!0),l.charge!=0?(r(),o("tr",st,[t("td",null,e(s.trans("Gateway Charge: ")),1),t("td",lt,e(i(y)(l.charge)),1)])):m("",!0),t("tr",null,[t("td",null,e(s.trans("Payable Amount: ")),1),t("td",at,e(i(y)(a.total*l.multiply+l.charge)),1)])]),l.comment!=null?(r(),o(p,{key:0},[t("p",ot,[t("b",null,e(s.trans("Payment Instruction: ")),1)]),t("p",rt,e(l.comment),1)],64)):m("",!0),l.phone_required==1?(r(),o("div",it,[t("label",dt,[t("b",null,e(s.trans("Your phone number")),1)]),c(t("input",{type:"number",name:"phone",placeholder:"Your phone number",class:"payment-input",required:"","onUpdate:modelValue":n[0]||(n[0]=u=>i(h).phone=u)},null,512),[[T,i(h).phone]])])):m("",!0),l.is_auto==0?(r(),o(p,{key:2},[t("div",ut,[t("label",mt,[t("b",null,e(s.trans("Submit your payment proof")),1)]),t("input",{onInput:n[1]||(n[1]=u=>{b.value.image=u.target.files[0]}),type:"file",name:"image",required:"",accept:"image/*"},null,32)]),t("div",null,[t("label",ct,[t("b",null,e(s.trans("Comment")),1)]),c(t("textarea",{class:"payment-textarea","onUpdate:modelValue":n[2]||(n[2]=u=>b.value.comment=u),required:"",name:"comment",placeholder:"comment",maxlength:"500"},null,512),[[T,b.value.comment]])])],64)):m("",!0),t("button",{disabled:i(h).processing,type:"submit",class:"btn btn-success mt-5 w-full"},e(s.trans("Pay Now")),9,pt)],40,W)],8,R)),[[P,v.value===l.id]])),128)),n[13]||(n[13]=t("br",null,null,-1)),t("div",yt,[t("div",vt,[t("b",null,e(s.trans("Invoiced To")),1),n[8]||(n[8]=t("br",null,null,-1)),d(" "+e(a.user.name),1),n[9]||(n[9]=t("br",null,null,-1)),d(" "+e(a.user.address),1)]),t("div",bt,[t("b",null,e(s.trans("Pay To")),1),n[10]||(n[10]=t("br",null,null,-1)),d(" "+e(a.invoice_data.company_name)+" ",1),n[11]||(n[11]=t("br",null,null,-1)),d(" "+e(a.invoice_data.address)+", "+e(a.invoice_data.city)+" ",1),n[12]||(n[12]=t("br",null,null,-1)),d(" "+e(a.invoice_data.post_code)+", "+e(a.invoice_data.country),1)])]),t("div",ht,[t("table",ft,[t("tr",gt,[t("td",null,[t("b",null,e(s.trans("Description")),1)]),t("td",null,[t("b",null,e(s.trans("Amount")),1)])]),t("tr",null,[t("td",null,e(a.plan.title),1),t("td",kt,e(a.plan.price_format),1)]),t("tr",null,[t("td",null,e(s.trans("Sub Total"))+":",1),t("td",wt,e(a.plan.price_format),1)]),t("tr",null,[t("td",null,e(s.trans("Tax"))+":",1),t("td",Ct,e(i(y)(a.tax)),1)]),t("tr",null,[t("td",null,e(s.trans("Total"))+" :",1),t("td",_t,e(i(y)(a.total)),1)])])]),M(k,{href:"/user/subscription",class:"payment-cancel-btn"},{default:A(()=>[d(e(s.trans("Cancel Payment")),1)]),_:1})])])],64)}}});export{Nt as default};
