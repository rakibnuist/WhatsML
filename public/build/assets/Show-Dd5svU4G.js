import{m as I}from"./vue3-apexcharts-ClrHZ1o3.js";import{_ as Y}from"./NoDataFound-KY-LTui4.js";import{_ as A}from"./Paginate-BtBw_72H.js";import{d as P,s as T,I as q,k as E,q as H,r as D,y as J,c as r,o as l,e as h,i as _,b as d,a as e,u as n,l as Q,n as j,t,h as u,F as v,g as z,w as N}from"./app-CHoD4jNo.js";import{_ as R}from"./AdminLayout-Ddg1XhLg.js";import{u as W,C as G}from"./CampaignCard-hzp1nNQi.js";import K from"./OverviewGrid-DVWLu_Lr.js";import{_ as X}from"./OverviewCard--f7BFjSb.js";import{h as y}from"./moment-BAtM24Ew.js";import"./AssetModal-Dh3z8yqV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputFieldError-DJP3I4Ws.js";import"./ToastrContainer-DreH4TsU.js";const Z={class:"mt-4 space-y-4"},L={class:"grid grid-cols-1 gap-6 lg:grid-cols-4"},ee={class:"card card-body col-span-1 flex flex-col justify-center gap-2"},te={class:"flex items-start gap-4"},se={class:"relative flex h-16 w-16 flex-col items-center gap-3"},ae={alt:"User avatar",class:"h-full w-full rounded-full border-2 border-gray-100 object-cover"},le={class:"flex flex-grow flex-col"},ne={class:"text-lg font-medium text-gray-900"},oe={class:"mb-2 text-sm text-gray-500"},re={class:"mt-auto flex items-center text-xs text-gray-500"},ie={key:0,class:"card card-body col-span-2 flex items-center justify-between rounded-2xl"},de={class:"flex flex-col"},ce={class:"text-lg font-semibold leading-6"},ue={key:0,class:"text-xs"},me={key:0,class:"text-sm dark:text-dark-400"},he={key:1,class:"text-sm text-red-500 dark:text-red-500/80"},pe={class:"flex min-h-16 min-w-16 items-center justify-center rounded-full bg-primary-600/60"},_e={key:2,class:"card flex h-44 flex-col items-center justify-center rounded-2xl"},fe={class:"table-responsive whitespace-nowrap rounded-primary"},ve={class:"p-2"},ye={class:"table"},ge={key:0},ke={class:"text-center"},we={class:"table-responsive whitespace-nowrap rounded-primary"},be={class:"p-2"},xe={class:"table"},Ce={class:"flex justify-end"},Me={key:0},Se={class:"text-left"},Ye={class:"flex justify-end"},Ae={class:"dropdown","data-placement":"bottom-start"},De={class:"dropdown-toggle"},je={class:"dropdown-content w-40"},ze={class:"dropdown-list"},Ne={class:"dropdown-list-item"},Ve=P({layout:R}),Ge=Object.assign(Ve,{__name:"Show",props:["singleUser","orders","activityLogs"],setup(c){const V=c,p=W(),{formatCurrency:B,uiAvatar:$,badgeClass:U}=T(),{analytics:m,dateFilterQueries:Be,filterForm:$e,loading:F,storageChart:g}=q(p),o=E(V.singleUser);return H(()=>{p.fetchAnalytics({type:"overviews",user_id:o.value.id}),p.fetchAnalytics({type:"storage",user_id:o.value.id}),p.fetchAnalytics({type:"plan_data",user_id:o.value.id})}),(s,i)=>{var w;const f=D("Icon"),k=D("Link"),O=J("lazy");return l(),r(v,null,[n(m).overviews.loading?(l(),h(X,{key:0,"skeleton-count":8})):_("",!0),d(K,{items:n(m).overviews.data},null,8,["items"]),e("div",Z,[e("div",L,[e("section",ee,[e("div",te,[e("div",se,[Q(e("img",ae,null,512),[[O,n($)(o.value.name,o.value.avatar)]]),e("span",{class:j([o.value.status===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800","rounded-full px-2 py-1 text-xs font-medium"])},t(o.value.status===1?s.trans("Active"):s.trans("Suspended")),3)]),e("div",le,[e("h3",ne,t(o.value.name),1),e("p",oe,t(o.value.email),1),e("div",re,[i[0]||(i[0]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),u(" "+t(s.trans("Joined: "))+t(n(y)(o.value.created_at).format("MMM D, YYYY")),1)])])])]),n(F)?_("",!0):(l(),r("div",ie,[e("div",de,[e("p",ce,[u(t(s.trans("Active Subscription"))+" ",1),n(m).plan_data.data&&o.value.will_expire?(l(),r("span",ue," ( "+t((w=n(m).plan_data.data)==null?void 0:w.plan_title)+" ) ",1)):_("",!0)]),o.value.will_expire?(l(),r("p",me,[u(t(s.trans("Your subscription expires on"))+" ",1),e("span",null,t(n(y)(o.value.will_expire).format("MMM DD, YYYY")),1)])):(l(),r("p",he,t(s.trans("No active subscription.")),1))]),e("div",pe,[d(f,{icon:"solar:calendar-broken",class:"size-8 text-gray-100"})])])),n(m).storage.loading&&!n(m).storage.data?(l(),h(G,{key:1})):(l(),r("div",_e,[s.$el?(l(),h(n(I),{key:0,width:"100%",height:"300",type:"radialBar",options:n(g).chartOptions,series:n(g).series},null,8,["options","series"])):_("",!0)]))]),e("div",fe,[e("h5",ve,t(s.trans("Orders")),1),e("table",ye,[e("thead",null,[e("tr",null,[e("th",null,t(s.trans("Order No")),1),e("th",null,t(s.trans("Plan Name")),1),e("th",null,t(s.trans("Payment Mode")),1),e("th",null,t(s.trans("Amount")),1),e("th",null,t(s.trans("Status")),1),e("th",null,t(s.trans("Created At")),1)])]),c.orders.total?(l(),r("tbody",ge,[(l(!0),r(v,null,z(c.orders.data,a=>(l(),r("tr",{key:a.id},[e("td",null,[d(k,{href:"/admin/order/"+a.id,class:"text-sm font-medium text-primary-500 transition duration-150 ease-in-out hover:underline"},{default:N(()=>[u(t(a.invoice_no),1)]),_:2},1032,["href"])]),e("td",null,t(a.plan.title),1),e("td",null,t(a.gateway.name),1),e("td",null,t(n(B)(a.amount)),1),e("td",null,[e("div",{class:j(["capitalize",n(U)(a.status)])},t(a.status),3)]),e("td",ke,t(a.created_at_diff),1)]))),128))])):(l(),h(Y,{key:1,"for-table":"true"}))]),d(A,{links:c.orders.links,preserveState:!0,preserveScroll:!0},null,8,["links"])]),e("div",we,[e("h5",be,t(s.trans("Activity Logs")),1),e("table",xe,[e("thead",null,[e("tr",null,[e("th",null,t(s.trans("Subject")),1),e("th",null,t(s.trans("User")),1),e("th",null,t(s.trans("Creator")),1),e("th",null,t(s.trans("Description")),1),e("th",null,t(s.trans("Workspace")),1),e("th",null,t(s.trans("Created at")),1),e("th",Ce,t(s.trans("Action")),1)])]),c.activityLogs.total>0?(l(),r("tbody",Me,[(l(!0),r(v,null,z(c.activityLogs.data,a=>{var b,x,C,M,S;return l(),r("tr",{key:a.id},[e("td",null,t(a.log_name),1),e("td",null,[e("strong",null,t((b=a.user)==null?void 0:b.name),1),i[1]||(i[1]=u()),i[2]||(i[2]=e("br",null,null,-1)),u(" "+t((x=a.user)==null?void 0:x.email),1)]),e("td",null,[e("strong",null,t((C=a.creator)==null?void 0:C.name),1),i[3]||(i[3]=e("br",null,null,-1)),u(" "+t((M=a.creator)==null?void 0:M.email),1)]),e("td",null,t(a.description),1),e("td",null,t((S=a.workspace)==null?void 0:S.name),1),e("td",Se,t(n(y)(a.created_at).format("DD MMM,YYYY h:mm A")),1),e("td",null,[e("div",Ye,[e("div",Ae,[e("div",De,[d(f,{class:"text-2xl",icon:"bx:dots-horizontal-rounded"})]),e("div",je,[e("ul",ze,[e("li",Ne,[d(k,{href:s.route("admin.activity-logs.show",a),class:"dropdown-link"},{default:N(()=>[d(f,{icon:"bx:show"}),e("span",null,t(s.trans("Details")),1)]),_:2},1032,["href"])])])])])])])])}),128))])):(l(),h(Y,{key:1,"for-table":"true"}))]),d(A,{links:c.activityLogs.links,preserveState:!0,preserveScroll:!0},null,8,["links"])])])],64)}}});export{Ge as default};
