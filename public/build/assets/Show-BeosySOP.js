import{G as $,s as P,T as B,E as _,H as N,d as S,q,c as h,o as n,a as s,b as f,u as e,t as m,e as c,i,F,g as O,l as v,v as b,x as j}from"./app-CHoD4jNo.js";import{_ as D}from"./RichEditor-DKA99M5H.js";import{_ as p}from"./InputFieldError-DJP3I4Ws.js";import{_ as H}from"./SpinnerBtn-DagqeiVX.js";import{_ as R}from"./UserLayout-T1Rud9jK.js";import{s as k}from"./multiselect-B4Pr08td.js";import"./AssetModal-Dh3z8yqV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-DreH4TsU.js";const{pickBy:A}=P(),G=$("aiToolsStore",{state:()=>({props:{},generatedText:"",documentName:"",fieldErrors:{},errors:{},hasError:!1,isProcessing:!1,form:B({prompt:"",language:"english",tone:"",max_token:200,qty:1,creativity:"",seconds:0,init_audio:null,model:"",template_id:"",fields:""}),tones:["Professional","Funny","Casual","Excited","Bold","Dramatic"],creativityLevels:[{label:"Optimal",value:.5},{label:"Low",value:.8},{label:"Medium",value:.9},{label:"High",value:1}]}),actions:{setInitialState(o){this.form=o},transformPrompt(){const o=[];this.form.fields.forEach(r=>{if(r.hasOwnProperty("value"))o[r.name]=r.value,this.hasError=!1;else{this.hasError=!0,this.fieldErrors[r.name]=`${r.name} is required`;return}}),this.form.prompt=this.props.template.prompt.replace(/\[(.*?)\]/g,(r,d)=>o[d])},generateText(){N.post(route("api-ai-generate-text",A(this.form))).then(async o=>{for(const r of o.data)r&&(this.generatedText+=" "+r),await new Promise(d=>setTimeout(d,100))}).catch(o=>{this.errors=o.response.data.errors,o.response.status==400&&_.danger("You don't have enough credits please purchase some credits"),_.danger(o.response.data.message??"Error generating text please try again later")}).finally(()=>{this.isProcessing=!1,this.fieldErrors={}})},submit(){if(this.props.template.credit_charge*this.form.qty>this.props.credits){_.danger("You don't have enough credits please purchase some credits");return}this.transformPrompt(),!this.hasError&&(this.isProcessing=!0,this.generateText())},downloadHTMLFile(o,r){const d=new Blob([o],{type:"text/html"}),u=document.createElement("a");u.href=URL.createObjectURL(d),u.download=r?r.replace(" ","-"):"untitled.html",u.click(),URL.revokeObjectURL(u.href)}}}),Y={class:"grid grid-cols-1 place-items-start gap-5 lg:grid-cols-12"},z={class:"flex items-center justify-between"},I={class:"flex items-center"},W=["src"],J={class:"mx-2 text-sm"},K={class:"capitalize text-gray-500"},Q={class:"grid grid-cols-2 gap-3"},X={class:"label mb-1"},Z={class:"label mb-1"},ee={class:"label mb-1"},te=["onUpdate:modelValue","placeholder"],se=["onUpdate:modelValue","placeholder"],ae={class:"label"},le={class:"flex items-center gap-5"},oe={class:"flex-1"},re={class:"label mb-1"},ne={class:"card col-span-1 flex flex-col p-3 lg:col-span-7"},ie={class:"user-activity-chart h-100 rounded p-4"},de={class:"flex"},me={class:"my-8"},ue={class:"ai-ck-section"},ce=S({layout:R}),ke=Object.assign(ce,{__name:"Show",props:["template","languages","credits"],setup(o){const r=o,{copyToClipboard:d,trim:u,uiAvatar:M}=P(),t=G();return q(()=>{t.$patch({props:r,form:{model:r.template.ai_model,template_id:r.template.id,fields:r.template.fields}})}),(g,l)=>{var V,T,E,L,w,U,C;return n(),h("div",Y,[s("form",{onSubmit:l[4]||(l[4]=j((...a)=>e(t).submit&&e(t).submit(...a),["prevent"])),class:"card card-body col-span-1 space-y-6 lg:col-span-5"},[s("div",z,[s("div",I,[s("img",{src:e(M)(o.template.title,o.template.icon),width:"50",height:"50",class:"rounded-full",alt:"icon"},null,8,W),s("p",J,m(o.template.title),1)]),s("p",K,m(e(u)(o.template.prompt_type)),1)]),s("div",Q,[s("div",null,[s("label",X,m(g.trans("Language"))+"*",1),f(e(k),{class:"multiselect-dark",modelValue:e(t).form.language,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).form.language=a),options:o.languages,valueProp:"name",label:"name",placeholder:"Language"},null,8,["modelValue","options"]),(V=e(t).errors)!=null&&V.language?(n(),c(p,{key:0,message:(T=e(t).errors)==null?void 0:T.language[0]},null,8,["message"])):i("",!0)]),s("div",null,[s("label",Z,m(g.trans("Tone"))+"*",1),f(e(k),{class:"multiselect-dark",modelValue:e(t).form.tone,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).form.tone=a),options:e(t).tones,placeholder:"Tone"},null,8,["modelValue","options"]),(E=e(t).errors)!=null&&E.tone?(n(),c(p,{key:0,message:(L=e(t).errors)==null?void 0:L.tone[0]},null,8,["message"])):i("",!0)])]),s("div",null,[(n(!0),h(F,null,O(e(t).form.fields,(a,x)=>(n(),h("div",{key:x},[s("label",ee,m(a.name)+"*",1),a.type==="input"?v((n(),h("input",{key:0,required:"","onUpdate:modelValue":y=>a.value=y,type:"text",class:"input",placeholder:a.placeholder},null,8,te)),[[b,a.value]]):i("",!0),a.type==="textarea"?v((n(),h("textarea",{key:1,required:"","onUpdate:modelValue":y=>a.value=y,class:"textarea",placeholder:a.placeholder},null,8,se)),[[b,a.value]]):i("",!0),e(t).hasError?(n(),c(p,{key:2,message:e(t).fieldErrors[a.name]},null,8,["message"])):i("",!0),!e(t).hasError&&e(t).errors&&e(t).errors["fields."+x+".value"]?(n(),c(p,{key:3,message:e(t).errors["fields."+x+".value"][0]},null,8,["message"])):i("",!0)]))),128))]),s("div",null,[s("label",ae,m(g.trans("Maximum Word Limit")),1),v(s("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).form.max_token=a),type:"text",class:"input",placeholder:"Maximum Length"},null,512),[[b,e(t).form.max_token,void 0,{number:!0}]]),(w=e(t).errors)!=null&&w.max_token?(n(),c(p,{key:0,message:(U=e(t).errors)==null?void 0:U.max_token[0]},null,8,["message"])):i("",!0)]),s("div",le,[s("div",oe,[s("label",re,m(g.trans("Creativity Level")),1),f(e(k),{class:"multiselect-dark",modelValue:e(t).form.creativity,"onUpdate:modelValue":l[3]||(l[3]=a=>e(t).form.creativity=a),options:e(t).creativityLevels,"value-by":"value",label:"label",placeholder:"Creativity Level"},null,8,["modelValue","options"]),(C=e(t).errors)!=null&&C.creativity?(n(),c(p,{key:0,message:e(t).errors.creativity[0]},null,8,["message"])):i("",!0)])]),f(H,{classes:"btn btn-primary w-full py-3",processing:e(t).isProcessing,"btn-text":g.trans("Generate")},null,8,["processing","btn-text"])],32),s("div",ne,[s("div",ie,[s("div",de,[s("button",{class:"me-1",onClick:l[5]||(l[5]=a=>e(d)(e(t).generatedText))},l[9]||(l[9]=[s("i",{class:"bx bx-clipboard text-2xl"},null,-1)])),s("button",{class:"ms-1",onClick:l[6]||(l[6]=a=>e(t).downloadHTMLFile(e(t).generatedText,e(t).documentName))},l[10]||(l[10]=[s("i",{class:"bx bx-download text-2xl"},null,-1)]))]),s("div",me,[v(s("input",{"onUpdate:modelValue":l[7]||(l[7]=a=>e(t).documentName=a),type:"text",class:"input",placeholder:"Untitled Document..."},null,512),[[b,e(t).documentName]])]),s("div",ue,[f(D,{modelValue:e(t).generatedText,"onUpdate:modelValue":l[8]||(l[8]=a=>e(t).generatedText=a)},null,8,["modelValue"])])])])])}}});export{ke as default};
