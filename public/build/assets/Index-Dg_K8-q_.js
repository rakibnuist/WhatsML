import{d as D,j as E,s as N,T as $,r as h,y as I,c as r,o as d,a as t,b as i,e as P,t as l,u as e,f as a,F as u,g as k,l as p,h as B,n as z,w as b,v,A as F}from"./app-CHoD4jNo.js";import{_ as L}from"./AdminLayout-Ddg1XhLg.js";import{_ as T}from"./Paginate-BtBw_72H.js";import{h as x}from"./moment-BAtM24Ew.js";import{_ as j}from"./NoDataFound-KY-LTui4.js";import{_ as O}from"./FilterDropdown-BWymQW5G.js";import"./AssetModal-Dh3z8yqV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputFieldError-DJP3I4Ws.js";import"./ToastrContainer-DreH4TsU.js";import"./SpinnerBtn-DagqeiVX.js";const R={class:"mt-4 space-y-4"},W={class:"table-responsive whitespace-nowrap rounded-primary"},q={class:"table"},G={class:"text-end"},H={key:0},J={class:"text-left"},K={class:"flex gap-2"},Q={class:"mr-1 inline w-12 rounded-full",alt:"preview"},X=["href"],Z={class:"font-bold"},tt={key:0,class:"badge badge-primary"},et={class:"text-left"},st={class:""},lt={class:"dropdown","data-placement":"bottom-start"},at={class:"dropdown-toggle"},ot={class:"dropdown-content w-32"},nt={class:"dropdown-list"},it={class:"dropdown-list-item"},dt={class:"dropdown-list-item"},ct=["onClick"],rt={class:"dropdown-list-item"},_t={class:"dropdown-list-item"},pt=["onClick"],mt={class:"mb-2"},ut={class:"mb-2"},ht={class:"mb-2"},bt={class:"label mb-2"},vt={value:""},ft=["value"],wt={class:"mb-2"},kt=D({layout:L}),Et=Object.assign(kt,{__name:"Index",props:["users","plans"],setup(m){const f=E(),{deleteRow:g,formatCurrency:y,uiAvatar:M}=N(),o=$({user_id:null,name:"",email:"",plan_id:"",will_expire:"",assign_plan:!0}),A=n=>{o.reset(),o.user_id=n.id,o.name=n.name,o.email=n.email,o.plan_id=n.plan_id??"",o.will_expire=n.will_expire??"",f.open("editUserModal")},U=()=>{o.put(route("admin.users.assign.plan",o.user_id),{onSuccess:()=>{o.reset(),f.close("editUserModal")}})},C=[{label:"Name",value:"name"},{label:"Email",value:"email"},{label:"Status",value:"status",options:[{label:"Active",value:1},{label:"Inactive",value:0}]}];return(n,c)=>{const _=h("Icon"),w=h("Link"),S=h("Modal"),V=I("lazy");return d(),r(u,null,[t("div",R,[i(O,{options:C}),t("div",W,[t("table",q,[t("thead",null,[t("tr",null,[t("th",null,l(e(a)("User")),1),t("th",null,l(e(a)("Plan")),1),t("th",null,l(e(a)("Expire At")),1),t("th",null,l(e(a)("Status")),1),t("th",null,l(e(a)("Date")),1),t("th",null,[t("div",G,l(e(a)("Action")),1)])])]),m.users.total?(d(),r("tbody",H,[(d(!0),r(u,null,k(m.users.data,s=>(d(),r("tr",{key:s.id},[t("td",J,[t("div",K,[p(t("img",Q,null,512),[[V,e(M)(s.name,s.avatar)]]),t("a",{href:n.route("admin.users.show",s.id)},[t("p",Z,l(s.name),1),t("p",null,l(s.email),1)],8,X)])]),t("td",null,[s.plan?(d(),r("span",tt,l(s.plan.title),1)):(d(),r(u,{key:1},[B(" N/A ")],64))]),t("td",null,l(s.will_expire?e(x)(s.will_expire).format("D MMM, YYYY"):e(a)("N/A")),1),t("td",et,[t("span",{class:z(["badge",s.status==1?"badge-success":"badge-danger"])},l(s.status==1?e(a)("Active"):e(a)("Inactive")),3)]),t("td",null,l(e(x)(s.created_at).format("D MMM, YYYY")),1),t("td",st,[t("div",lt,[t("div",at,[i(_,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),t("div",ot,[t("ul",nt,[t("li",it,[i(w,{href:n.route("admin.users.show",s),class:"dropdown-link"},{default:b(()=>[i(_,{icon:"bx:show"}),t("span",null,l(e(a)("View")),1)]),_:2},1032,["href"])]),t("li",dt,[t("button",{onClick:Y=>A(s),class:"dropdown-link"},[i(_,{icon:"bx:user-pin"}),t("span",null,l(e(a)("Assign Plan")),1)],8,ct)]),t("li",rt,[i(w,{href:n.route("admin.users.edit",s),class:"dropdown-link"},{default:b(()=>[i(_,{icon:"bx:edit"}),t("span",null,l(e(a)("Edit")),1)]),_:2},1032,["href"])]),t("li",_t,[t("button",{as:"button",class:"dropdown-link",onClick:Y=>e(g)(n.route("admin.users.destroy",s.id))},[i(_,{class:"h-6",icon:"bx:trash"}),t("span",null,l(e(a)("Delete")),1)],8,pt)])])])])])]))),128))])):(d(),P(j,{key:1,"for-table":"true"}))]),i(T,{links:m.users.links},null,8,["links"])])]),i(S,{state:"editUserModal","header-state":!0,"header-title":e(a)("Assign Plan"),"action-btn-text":e(a)("Update"),"action-btn-state":!0,"action-processing":e(o).processing,onAction:U},{default:b(()=>[t("div",mt,[t("label",null,l(e(a)("Name")),1),p(t("input",{type:"text",class:"input",disabled:"","onUpdate:modelValue":c[0]||(c[0]=s=>e(o).name=s)},null,512),[[v,e(o).name]])]),t("div",ut,[t("label",null,l(e(a)("Email")),1),p(t("input",{type:"email",class:"input",disabled:"","onUpdate:modelValue":c[1]||(c[1]=s=>e(o).email=s)},null,512),[[v,e(o).email]])]),t("div",ht,[t("label",bt,l(e(a)("Plan")),1),p(t("select",{"onUpdate:modelValue":c[2]||(c[2]=s=>e(o).plan_id=s),class:"select"},[t("option",vt,l(e(a)("Select Plan")),1),(d(!0),r(u,null,k(m.plans,s=>(d(),r("option",{value:s.id,key:s.id},l(s.title)+" "+l(e(y)(s.price)),9,ft))),128))],512),[[F,e(o).plan_id]])]),t("div",wt,[t("label",null,l(e(a)("Will Expire")),1),p(t("input",{type:"date",class:"input","onUpdate:modelValue":c[3]||(c[3]=s=>e(o).will_expire=s)},null,512),[[v,e(o).will_expire]])])]),_:1},8,["header-title","action-btn-text","action-processing"])],64)}}});export{Et as default};
