import{aA as w,f as s,N as h,d as j,k as C,T as p,c as d,o as u,l as D,a as e,i as S,Z as V,h as v,t as c,u as n,x,b as y}from"./app-CHoD4jNo.js";import{_ as A}from"./AdminLayout-Ddg1XhLg.js";import{_ as g}from"./SpinnerBtn-DagqeiVX.js";import"./AssetModal-Dh3z8yqV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputFieldError-DJP3I4Ws.js";import"./ToastrContainer-DreH4TsU.js";const B=w({state:!1,link:null,method:"delete",data:null,confirm_text:null,message:null,accept_btn_text:null,reject_btn_text:null,callback:null,init(a=null,{method:l,data:i={},options:t={},callback:r}){this.link=a,this.message=(t==null?void 0:t.message)||this.message,this.confirm_text=(t==null?void 0:t.confirm_text)||s("Are you sure?"),this.accept_btn_text=(t==null?void 0:t.accept_btn_text)||"Yes, Confirm!",this.reject_btn_text=(t==null?void 0:t.reject_btn_text)||"No, Cancel!",r instanceof Function&&(this.callback=r),l&&i&&(this.method=l,this.data=i),this.state=!0},initCallback(a,l={}){this.init(null,{callback:a,options:l})},async accept(){const a=["post","put","patch","delete"],{method:l,link:i,data:t,callback:r}=this;i&&a.includes(l)&&(l=="delete"?h.delete(i):h[l](i,t)),i&&!a.includes(l)&&h.delete(i),r instanceof Function&&r(),this.state=!1},reset(){Object.assign(this,{link:null,state:!1,method:"delete",data:null,message:"You want to delete this?",confirm_text:s("Are you sure?"),accept_btn_text:"Yes, delete it!",reject_btn_text:"No, Cancel!"})}}),K={class:"space-y-6"},U={class:"alert alert-info",role:"alert"},F={class:"card"},Y={class:"card-body"},z={class:"flex justify-between"},E={class:"card-title"},I={class:"card-body"},M={key:0,class:"my-3 flex items-center justify-between rounded-lg border p-4"},O={class:"mb-2"},P={for:""},T=["value"],$={class:"mb-2"},q={key:0,class:"alert alert-info",role:"alert"},Z=j({layout:A}),X=Object.assign(Z,{__name:"Index",props:["version","purchaseKey","updateData"],setup(a){var m;const l=a,i=C(!1),t=p({purchase_key:l.purchaseKey}),r=p({version:(m=l.updateData)==null?void 0:m.version}),k=()=>{t.post(route("admin.update.store"),{onError:_=>{console.log(_)}})},N=()=>{B.init(null,{options:{message:s("Before send a request for update please take a backup of your site with database"),confirm_text:s("Note"),accept_btn_text:s("Proceed for update"),reject_btn_text:s("Cancel")},callback:()=>{i.value=!0}})};return(_,o)=>{var f,b;return u(),d("div",K,[D(e("div",U,[o[0]||(o[0]=e("i",{width:"1rem",height:"1rem","data-feather":"alert-circle"},null,-1)),e("p",null,[e("b",null,c(n(s)("Note"))+":",1),v(" "+c((f=a.updateData)==null?void 0:f.message),1)])],512),[[V,(b=a.updateData)==null?void 0:b.message]]),e("div",F,[e("div",Y,[e("div",z,[e("h4",E,c(n(s)("Site Update")),1),e("p",null,c(n(s)("Current Version"))+" "+c(a.version),1)]),e("div",I,[a.updateData?(u(),d("div",M,[e("p",null,c(n(s)("Update Available")),1),e("h6",null,c(a.updateData.version),1),e("div",null,[e("form",{onSubmit:x(N,["prevent"])},[y(g,{processing:n(r).processing,"btn-text":n(s)("Update Now")},null,8,["processing","btn-text"])],32)])])):(u(),d("form",{key:1,onSubmit:x(k,["prevent"])},[e("div",O,[e("label",P,c(n(s)("Purchase Key")),1),e("input",{type:"text",class:"input",value:a.purchaseKey,disabled:""},null,8,T)]),e("div",$,[y(g,{processing:n(t).processing,disabled:!n(t).purchase_key,"btn-text":n(s)("Check New Update")},null,8,["processing","disabled","btn-text"])])],32))])])]),a.updateData?S("",!0):(u(),d("div",q,[o[1]||(o[1]=e("i",{width:"1rem",height:"1rem","data-feather":"alert-circle"},null,-1)),e("p",null,[e("b",null,c(n(s)("Note"))+":",1),v(" "+c(n(s)("If you have customized the script from codebase do not use this option. you will lose your customization.")),1)])]))])}}});export{X as default};
