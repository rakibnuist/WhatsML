import{k as N,T as j,q as z,r as E,c as i,o as c,b as a,F as b,g as v,d as L,a as _,u as r,n as P,t as d,i as V,e as y,j as W,x as D,h as w,f as U}from"./app-B4kV47qU.js";import{_ as k}from"./InputField-DXo1g-Zb.js";import{_ as R}from"./SpinnerBtn-B3fjBeDL.js";import{_ as q}from"./UserLayout-DG2qUs8x.js";import A from"./TemplatePreview-BCVClSSu.js";import{_ as J}from"./ShortCodes-4WIx1doN.js";import"./sharedComposable-VJJUONp6.js";import"./toastComposable-CvcyPmJb.js";import"./Modal-ChMy0A7y.js";import"./modalStore-BgORG3Nn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-Cfx6wOd2.js";import"./AssetModal-vtiWQmiY.js";import"./IntersectionObserver-DbdokySM.js";import"./assetStore-cDK0Afhq.js";const G={class:"card flex max-w-max flex-wrap gap-2 rounded-lg bg-gray-100 p-1 dark:bg-gray-800"},H=["onClick"],K={class:"mt-4 grid grid-cols-1 place-items-start gap-10 md:grid-cols-12"},Q={class:"card card-body md:col-span-9"},X={key:0},Y={class:"label mb-1 capitalize"},Z=["accept","onInput"],ee={key:1},te={class:"label mb-1 capitalize"},ae=["onUpdate:modelValue"],oe={key:3},ne={class:"label mb-1 block capitalize"},le=["onUpdate:modelValue","placeholder"],se=["onClick","disabled"],re={class:"flex justify-end"},ce={key:4},ie={key:5},me={class:"label mb-1 block capitalize"},ue={key:0},pe=["onClick"],de=["onUpdate:modelValue","name"],be={class:"flex justify-end"},_e={class:"w-full md:col-span-3"},he={class:"whatsapp-chat-body relative h-[35rem] rounded-xl border-2 border-dark-400 outline outline-4 outline-dark-500 dark:border-dark-800 dark:outline-dark-950"},ge={class:"absolute bottom-3 left-4 w-10/12 rounded-lg bg-white p-1 dark:bg-dark-700 xl:w-8/12"},Ie=Object.assign({layout:q},{__name:"Create",setup(ve){const p=N("text"),t=j({name:"",type:"text",meta:{}}),$=[{label:"Text Message",value:"text"},{label:"Text with Image",value:"image"},{label:"Text With Video",value:"video"},{label:"Audio Message",value:"audio"},{label:"Send Location",value:"location"},{label:"Poll Message",value:"poll"},{label:"Document Message",value:"document"}],C={text:{text:""},poll:{name:"",values:["",""],selectableCount:1},video:{video:null,caption:"",gifPlayback:!0},image:{image:null,caption:""},audio:{audio:null},location:{latitude:"",longitude:""},document:{document:null,caption:""}},x=l=>{t.type=l,t.meta=JSON.parse(JSON.stringify(C[l]))},S=()=>{t.post(route("user.whatsapp-web.templates.store"))};z(p,x),x(p.value);const T=(l,o)=>{const m=l.target.files[0];if(m){t.meta[o]=m;const s=URL.createObjectURL(m);o==="document"&&(t.meta.document_name=m.name),["video","image","audio"].includes(o)&&(t.meta[`${o}Url`]=s)}},h=(l,o)=>l==="values"?"array":["video","image","audio","document"].includes(l)?"file":typeof o=="boolean"?"checkbox":typeof o=="number"?"number":["latitude","longitude","name","caption"].includes(l)?"input":l==="text"?"textarea":"input",M=()=>{t.meta.values.push("")},F=l=>{t.meta.values.splice(l,1)},O=(l,o)=>{const m=document.querySelector(`textarea[name="meta.${l}"]`);if(!m)return;const s=m.selectionStart,e=m.selectionEnd,n=t.meta[l].substring(s,e),u=n.startsWith(o)&&n.endsWith(o),g=u?n.slice(o.length,-o.length):o+n+o;t.meta[l]=t.meta[l].substring(0,s)+g+t.meta[l].substring(e);const B=s+(u?-o.length:o.length),I=e+(u?-o.length:o.length);m.setSelectionRange(B,I)},f=[{label:"Italic",symbol:"_"},{label:"Monospace",symbol:"```"},{label:"Strike",symbol:"~"},{label:"Bold",symbol:"*"}];return(l,o)=>{const m=E("Icon");return c(),i(b,null,[a("div",G,[(c(),i(b,null,v($,s=>a("button",{key:s.value,class:P(["btn-xs flex-1 whitespace-nowrap rounded-md px-8 py-2 hover:bg-primary-100 dark:hover:bg-primary-700/50 md:flex-initial",{"bg-primary-600 text-white hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800":s.value===p.value,"bg-white text-gray-700 dark:bg-gray-700 dark:text-gray-200":s.value!==p.value}]),onClick:e=>p.value=s.value},d(s.label),11,H)),64))]),a("div",K,[a("div",Q,[a("form",{onSubmit:L(S,["prevent"]),class:"space-y-2"},[_(k,{modelValue:r(t).name,"onUpdate:modelValue":o[0]||(o[0]=s=>r(t).name=s),label:"Name"},null,8,["modelValue"]),(c(!0),i(b,null,v(r(t).meta,(s,e)=>(c(),i(b,{key:e},[h(e,s)==="file"?(c(),i("div",X,[a("label",Y,d(e),1),a("input",{type:"file",accept:`${e}/*`,onInput:n=>T(n,e),class:"input"},null,40,Z)])):h(e,s)==="checkbox"?(c(),i("div",ee,[a("label",te,[y(a("input",{type:"checkbox","onUpdate:modelValue":n=>r(t).meta[e]=n,class:"mr-2"},null,8,ae),[[D,r(t).meta[e]]]),W(" "+d(e),1)])])):h(e,s)==="number"?(c(),V(k,{key:2,modelValue:r(t).meta[e],"onUpdate:modelValue":n=>r(t).meta[e]=n,label:e.charAt(0).toUpperCase()+e.slice(1),type:"number",step:"any"},null,8,["modelValue","onUpdate:modelValue","label"])):h(e,s)==="array"?(c(),i("div",oe,[a("label",ne,d(e),1),(c(!0),i(b,null,v(r(t).meta[e],(n,u)=>(c(),i("div",{key:u,class:"mb-2 flex items-center"},[y(a("input",{"onUpdate:modelValue":g=>r(t).meta[e][u]=g,type:"text",placeholder:`Option ${u+1}`,class:"input mr-2"},null,8,le),[[w,r(t).meta[e][u]]]),a("button",{type:"button",onClick:g=>F(u),class:"btn btn-danger py-2",disabled:r(t).meta[e].length<=2},[_(m,{icon:"bx:trash",class:"text-lg"})],8,se)]))),128)),a("div",re,[a("button",{type:"button",onClick:M,class:"btn btn-primary py-1"},[_(m,{icon:"bx:plus"}),a("span",null,d(l.trans("Option")),1)])])])):h(e,s)==="input"?(c(),i("div",ce,[e!==`${p.value}Url`&&e!==`${p.value}_name`?(c(),V(k,{key:0,modelValue:r(t).meta[e],"onUpdate:modelValue":n=>r(t).meta[e]=n,label:e,placeholder:`Enter ${e}`},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])):U("",!0)])):(c(),i("div",ie,[a("label",me,d(e),1),e==="text"?(c(),i("div",ue,[(c(),i(b,null,v(f,n=>a("button",{key:n.label,type:"button",class:"btn btn-outline-primary btn-xs mr-2",onClick:u=>O(e,n.symbol)},d(n.label),9,pe)),64))])):U("",!0),y(a("textarea",{"onUpdate:modelValue":n=>r(t).meta[e]=n,name:`meta.${e}`,class:"textarea mt-2"},null,8,de),[[w,r(t).meta[e]]]),_(J,{modelValue:r(t).meta[e],"onUpdate:modelValue":n=>r(t).meta[e]=n},null,8,["modelValue","onUpdate:modelValue"])]))],64))),128)),a("div",be,[_(R,{"btn-text":"Submit",type:"submit",class:"btn btn-primary mt-4",processing:r(t).processing},null,8,["processing"])])],32)]),a("div",_e,[a("div",he,[a("div",ge,[_(A,{template:r(t)},null,8,["template"])])])])])],64)}}});export{Ie as default};
