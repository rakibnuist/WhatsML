import{T as b,r as N,c as m,o as d,a as r,b as s,i as V,t,F,g as G,f as u,w as g,d as v,u as e,j as w}from"./app-B4kV47qU.js";import{_}from"./MultiSelect-Ba8gY0R1.js";import{_ as S}from"./Modal-ChMy0A7y.js";import{_ as P}from"./Paginate-DtQjslkz.js";import{_ as U}from"./NoDataFound-su6Kbmdk.js";import{_ as k}from"./SpinnerBtn-B3fjBeDL.js";import{s as j}from"./sharedComposable-VJJUONp6.js";import{_ as B}from"./UserLayout-DG2qUs8x.js";import{u as T}from"./modalStore-BgORG3Nn.js";import{_ as A}from"./FilterDropdown-B678SkyV.js";import"./multiselect-Bn1369QT.js";import"./toastComposable-CvcyPmJb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-Cfx6wOd2.js";import"./AssetModal-vtiWQmiY.js";import"./IntersectionObserver-DbdokySM.js";import"./assetStore-cDK0Afhq.js";const E={class:"table-responsive mt-4 w-full"},O={class:"table"},R={class:"w-[25%]"},L={class:"!text-right"},q={class:"!text-right"},z={key:0,class:"tbody"},H={class:"flex items-center gap-2"},J=["src"],K={class:"!text-right"},Q={class:"flex justify-end"},W={class:"dropdown","data-placement":"bottom-start"},X={class:"dropdown-toggle"},Y={class:"dropdown-content w-56"},Z={class:"dropdown-list"},ss={class:"dropdown-list-item"},es=["href"],os={class:"dropdown-list-item"},ts=["onClick"],rs={class:"w-full"},ls={class:"mb-2"},as={key:0,class:"text-red-600"},is={class:"mb-2"},ds={key:0,class:"text-red-600"},ns={class:"mt-2"},cs={class:"w-full"},ms={class:"label mb-1"},ps={href:"/assets/whatsapp-customers-sample.csv",download:""},us={key:0,class:"text-red-600"},_s={class:"mb-2"},hs={key:0,class:"text-red-600"},fs={class:"mt-2"},bs={class:"mb-2"},gs={key:0,class:"text-red-600"},vs={class:"mb-2"},ws={key:0,class:"text-red-600"},Ss={class:"mt-2"},As=Object.assign({layout:B},{__name:"Index",props:["groups","platforms","customers","scraped_record"],setup(p){const h=T(),{deleteRow:x}=j(),l=b({platform_ids:[],group_ids:[]}),a=b({scraped_record_ids:[],group_ids:[]}),C=()=>{l.post(route("user.whatsapp-web.customers.import-from-device"),{onSuccess:()=>{h.close("importFromDeviceModal"),l.reset()}})},D=()=>{a.post(route("user.whatsapp-web.customers.import-from-scraping"),{onSuccess:()=>{h.close("importFromScrapeDataModal"),a.reset()}})},n=b({csv_file:null,group_ids:[]}),I=()=>{n.post(route("user.whatsapp-web.customers.bulk-import"),{onSuccess:()=>{h.close("importModal"),n.reset()}})},M=[{label:"Name",value:"name"},{label:"Phone",value:"uuid"}];return(c,i)=>{const f=N("Icon");return d(),m(F,null,[r(A,{options:M}),s("div",E,[s("table",O,[s("thead",null,[s("tr",null,[s("th",R,t(c.trans("Name")),1),s("th",null,t(c.trans("Phone")),1),s("th",L,t(c.trans("Groups")),1),s("th",q,t(c.trans("Action")),1)])]),p.customers.data.length?(d(),m("tbody",z,[(d(!0),m(F,null,G(p.customers.data,(o,$)=>(d(),m("tr",{key:$},[s("td",null,[s("div",H,[s("img",{src:o.picture??"https://ui-avatars.com/api/?name="+o.name,class:"h-8 w-8 rounded-full"},null,8,J),s("span",null,t(o.name),1)])]),s("td",null,t(o.uuid),1),s("td",K,t(o.groups.map(y=>y.name).join(", ")||"N/A"),1),s("td",null,[s("div",Q,[s("div",W,[s("div",X,[r(f,{class:"h-5 text-3xl text-slate-400",icon:"bx:dots-vertical-rounded"})]),s("div",Y,[s("ul",Z,[s("li",ss,[s("a",{href:c.route("user.whatsapp-web.customers.edit",o),class:"dropdown-link"},[r(f,{icon:"bx:edit"}),w(" "+t(c.trans("Edit")),1)],8,es)]),s("li",os,[s("button",{class:"dropdown-link delete-confirm",href:"#",onClick:y=>e(x)(c.route("user.whatsapp-web.customers.destroy",o.id))},[r(f,{icon:"bx:trash"}),w(" "+t(c.trans("Delete")),1)],8,ts)])])])])])])]))),128))])):(d(),V(U,{key:1,forTable:!0}))]),s("div",rs,[p.customers.data.length?(d(),V(P,{key:0,links:p.customers.links},null,8,["links"])):u("",!0)])]),r(S,{state:"importFromDeviceModal","header-state":!0,"header-title":"Import from device"},{default:g(()=>[s("form",{onSubmit:v(C,["prevent"])},[s("div",ls,[r(_,{label:"Import from",placeholder:"Select Devices",modelValue:e(l).platform_ids,"onUpdate:modelValue":i[0]||(i[0]=o=>e(l).platform_ids=o),options:p.platforms},null,8,["modelValue","options"]),e(l).errors.platform_ids?(d(),m("small",as,t(e(l).errors.platform_ids),1)):u("",!0)]),s("div",is,[r(_,{label:"Import to",placeholder:"Select Groups",modelValue:e(l).group_ids,"onUpdate:modelValue":i[1]||(i[1]=o=>e(l).group_ids=o),options:p.groups},null,8,["modelValue","options"]),e(l).errors.group_ids?(d(),m("small",ds,t(e(l).errors.group_ids),1)):u("",!0)]),s("div",ns,[r(k,{classes:"btn btn-primary w-full","btn-text":"Import Contacts",processing:e(l).processing},null,8,["processing"])])],32)]),_:1}),r(S,{state:"importModal","header-state":!0,"header-title":"Import customers"},{default:g(()=>[s("form",{onSubmit:v(I,["prevent"])},[s("div",cs,[s("label",ms,[w(t(c.trans("Select CSV"))+" ",1),s("a",ps,t(c.trans("(Download Sample)")),1)]),s("input",{type:"file",accept:".csv",onChange:i[2]||(i[2]=o=>e(n).csv_file=o.target.files[0]),class:"input"},null,32),e(n).errors.csv_file?(d(),m("small",us,t(e(n).errors.csv_file),1)):u("",!0)]),s("div",_s,[r(_,{label:"Groups",placeholder:"Select Groups",modelValue:e(n).group_ids,"onUpdate:modelValue":i[3]||(i[3]=o=>e(n).group_ids=o),options:p.groups,"input-label":"label",valueProp:"value"},null,8,["modelValue","options"]),e(n).errors.group_ids?(d(),m("small",hs,t(e(n).errors.group_ids),1)):u("",!0)]),s("div",fs,[r(k,{classes:"btn btn-primary w-full",processing:e(n).processing},null,8,["processing"])])],32)]),_:1}),r(S,{state:"importFromScrapeDataModal","header-state":!0,"header-title":"Import contacts"},{default:g(()=>[s("form",{onSubmit:v(D,["prevent"])},[s("div",bs,[r(_,{label:"Import from",placeholder:"Select Scraped Records",modelValue:e(a).scraped_record_ids,"onUpdate:modelValue":i[4]||(i[4]=o=>e(a).scraped_record_ids=o),options:p.scraped_record,"input-label":"label",valueProp:"value"},null,8,["modelValue","options"]),e(a).errors.scraped_record_ids?(d(),m("small",gs,t(e(l).errors.scraped_record_ids),1)):u("",!0)]),s("div",vs,[r(_,{label:"Import to",placeholder:"Select Groups",modelValue:e(a).group_ids,"onUpdate:modelValue":i[5]||(i[5]=o=>e(a).group_ids=o),options:p.groups,"input-label":"label",valueProp:"value"},null,8,["modelValue","options"]),e(a).errors.group_ids?(d(),m("small",ws,t(e(a).errors.group_ids),1)):u("",!0)]),s("div",Ss,[r(k,{classes:"btn btn-primary w-full","btn-text":"Import Contacts",disabled:!e(a).group_ids.length||!e(a).scraped_record_ids.length,processing:e(a).processing},null,8,["disabled","processing"])])],32)]),_:1})],64)}}});export{As as default};
