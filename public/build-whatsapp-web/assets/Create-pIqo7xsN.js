import{T as M,l as S,r as E,c as d,o as p,a as r,b as l,d as R,i as h,f as w,u as t,n as T,t as c}from"./app-B4kV47qU.js";import{_ as C}from"./MultiSelect-Ba8gY0R1.js";import{_ as U}from"./SpinnerBtn-B3fjBeDL.js";import{_ as $}from"./UserLayout-DG2qUs8x.js";import{_ as L}from"./ShortCodes-4WIx1doN.js";import{S as i}from"./SelectField-DDQVhg7j.js";import{_ as B}from"./TextareaField-BzKE3deG.js";import D from"./TemplatePreview-BCVClSSu.js";import"./multiselect-Bn1369QT.js";import"./sharedComposable-VJJUONp6.js";import"./toastComposable-CvcyPmJb.js";import"./Modal-ChMy0A7y.js";import"./modalStore-BgORG3Nn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-Cfx6wOd2.js";import"./AssetModal-vtiWQmiY.js";import"./IntersectionObserver-DbdokySM.js";import"./assetStore-cDK0Afhq.js";const N={class:"p-4 sm:p-6"},j={class:"mt-4 grid grid-cols-1 place-items-start gap-4 md:grid-cols-12"},F={class:"card card-body md:col-span-9"},H={class:"grid grid-cols-2 gap-2"},P={key:1,class:"col-span-3"},z={class:"mt-2 flex items-end justify-between"},K={class:"w-full md:col-span-3"},O={class:"whatsapp-chat-body relative h-[35rem] rounded-xl border-2 border-dark-400 outline outline-4 outline-dark-500 dark:border-dark-800 dark:outline-dark-950"},q={class:"absolute bottom-3 left-4 w-10/12 rounded-lg bg-white p-1 px-2 dark:bg-dark-700 xl:w-8/12"},A={key:1},G={class:"rounded-lg bg-gray-100 p-2 text-[11px] leading-4 dark:bg-dark-800"},I={class:"text-end text-[10px] text-gray-400"},J={key:2},_e=Object.assign({layout:$},{__name:"Create",props:["platforms","sort_codes","templates","autoReply"],setup(n){const o=n,u=!!o.autoReply,e=M({platform_id:"",keywords:[],message_type:"text",match_type:"",template_id:"",meta:{},message_template:"",status:"active",_method:"post"});u&&(e.platform_id=o.autoReply.platform_id,e.keywords=o.autoReply.keywords,e.message_type=o.autoReply.message_type,e.match_type=o.autoReply.match_type,e.template_id=o.autoReply.template_id,e.meta=o.autoReply.meta,e.message_template=o.autoReply.message_template,e.status=o.autoReply.status,e._method="put");const V=()=>{e.post(u?route("user.whatsapp-web.auto-replies.update",o.autoReply):route("user.whatsapp-web.auto-replies.store"),{preserveScroll:!0,onSuccess:()=>e.reset()})},_=S(()=>o.templates.find(m=>m.id==e.template_id));return(m,a)=>{var g,y,f,v,b,k;const x=E("PageHeader");return p(),d("main",N,[r(x),l("div",j,[l("div",F,[l("form",{onSubmit:R(V,["prevent"])},[l("div",H,[r(i,{label:"Device",modelValue:t(e).platform_id,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).platform_id=s),placeholder:"SELECT",validationMessage:(g=t(e).errors)==null?void 0:g.platform_id,options:n.platforms},null,8,["modelValue","validationMessage","options"]),r(i,{label:"Message Type",modelValue:t(e).message_type,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).message_type=s),placeholder:"SELECT",validationMessage:(y=t(e).errors)==null?void 0:y.message_type,options:["text","template"]},null,8,["modelValue","validationMessage"]),t(e).message_type==="template"?(p(),h(i,{key:0,class:"col-span-1",label:"Select a Template",modelValue:t(e).template_id,"onUpdate:modelValue":a[2]||(a[2]=s=>t(e).template_id=s),placeholder:"SELECT",validationMessage:(f=t(e).errors)==null?void 0:f.template_id,options:n.templates},null,8,["modelValue","validationMessage","options"])):w("",!0),r(C,{class:T(t(e).message_type==="text"?"col-span-full":"col-span-1"),label:"Keywords",modelValue:t(e).keywords,"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).keywords=s),placeholder:"enter keywords",validationMessage:(v=t(e).errors)==null?void 0:v.keywords,options:[]},null,8,["class","modelValue","validationMessage"]),t(e).message_type==="text"?(p(),d("div",P,[r(B,{label:"Message",placeholder:"Enter the message template",modelValue:t(e).message_template,"onUpdate:modelValue":a[4]||(a[4]=s=>t(e).message_template=s),validationMessage:(b=t(e).errors)==null?void 0:b.message_template,attrs:{rows:5}},null,8,["modelValue","validationMessage"]),r(L,{modelValue:t(e).message_template,"onUpdate:modelValue":a[5]||(a[5]=s=>t(e).message_template=s)},null,8,["modelValue"])])):w("",!0)]),l("div",z,[r(i,{class:"max-w-xs",label:"Status",modelValue:t(e).status,"onUpdate:modelValue":a[6]||(a[6]=s=>t(e).status=s),placeholder:"SELECT",validationMessage:(k=t(e).errors)==null?void 0:k.status,options:["active","inactive"]},null,8,["modelValue","validationMessage"]),r(U,{processing:t(e).processing,"btn-text":u?"Update":"Create"},null,8,["processing","btn-text"])])],32)]),l("div",K,[l("div",O,[l("div",q,[t(e).message_type=="template"&&_.value?(p(),h(D,{key:0,template:_.value},null,8,["template"])):t(e).message_type=="text"&&!_.value?(p(),d("div",A,[l("p",G,c(t(e).message_template||m.trans("The message will appear here")),1),l("p",I,c(new Date().toLocaleTimeString()),1)])):(p(),d("p",J,c(m.trans("The message will appear here")),1))])])])])])}}});export{_e as default};
