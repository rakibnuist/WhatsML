import{k as T,T as V,c as d,o as n,b as o,a as v,u as e,N as c,t as r,f as z,d as I,e as R,i as m,h as D,w as q,F as g,j as A,g as G,B as H,n as J}from"./app-B4kV47qU.js";import"./moment-BAtM24Ew.js";import{_ as E}from"./SpinnerBtn-B3fjBeDL.js";import{u as K}from"./chatStore-CTtmOQOw.js";import{u as Q}from"./modalStore-BgORG3Nn.js";import{s as W}from"./sharedComposable-VJJUONp6.js";import"./toastComposable-CvcyPmJb.js";import"./echoServiceComposable-n1MnmRL6.js";const X={class:"mt-3 flex flex-col items-center justify-center"},Y={class:"group relative h-14 w-14",type:"button"},Z=["src"],ee={class:"mt-2 flex flex-col items-center text-sm"},te={key:0,class:"font-semibold"},se={class:"text-gray-500"},oe={class:"text-gray-500"},ne={key:0},ae={key:1},ie={class:"w-full"},re={class:"space-y-4 p-4 text-center"},le={class:"flex items-center gap-2"},de={class:"text-sm"},ce={class:"flex justify-between"},ue={key:0},pe={key:1},ve={key:0,class:"alert alert-info"},me={key:1},be={class:"text-center"},ge={class:"small mb-2 italic text-gray-500"},Ne={__name:"RightSidebar",setup(ye){var k;const{copyToClipboard:L}=W(),y=Q(),u=T(!1),b=T(!1),t=K(),i=V({name:((k=t.activeConversation)==null?void 0:k.name)??t.activeConversation.id.split("@")[0].substring(2),note:t.activeConversation.description,picture:"",update_type:null,module:"whatsapp-web",_method:"put"}),U=()=>{i.update_type="note",f()},f=()=>{var l;i.post(route("user.conversations.update",(l=t.activeConversation)==null?void 0:l.id),{onSuccess:()=>{u.value=!1,b.value=!1,i.update_type==="profile_picture"&&(t.activeConversation.customer.picture=URL.createObjectURL(i.picture)),i.update_type==="name"&&(t.activeConversation.name=i.name),i.update_type==="note"&&(t.activeConversation.description=i.note)}})},C=()=>{i.update_type="name",f()},F=l=>{V({}).delete(route("user.conversations.badges.destroy",l),{onSuccess:()=>{t.activeConversation.badge_id=null}})};return(l,s)=>{var x,_,h,w,S,N,B,M,$,j,P;return n(),d("div",{class:J(["card absolute right-0 z-20 ml-2 h-[calc(100vh-11rem)] w-6/12 rounded-md p-1 transition-all duration-300 lg:w-3/12",[e(t).rightSidebar.isOpen?"-translate-x-0":"translate-x-[120%]"]])},[o("button",{type:"button",onClick:s[0]||(s[0]=(...a)=>e(t).toggleRightSidebar&&e(t).toggleRightSidebar(...a)),class:"absolute left-0 top-5 z-20 inline-flex h-8 w-8 -translate-x-10 items-center justify-center rounded-full bg-black/50 text-white dark:text-slate-300"},[v(e(c),{icon:"fe:close"})]),s[12]||(s[12]=o("h6",{class:"border-b border-gray-100 py-4 pl-3 dark:border-dark-700"},"Details",-1)),o("div",X,[o("button",Y,[o("img",{class:"h-full w-full rounded-full border object-contain object-center",src:e(t).getConversationProfilePic(),alt:"profile-img"},null,8,Z)]),o("button",{type:"button",class:"btn btn-outline-primary btn-sm mt-2",onClick:s[1]||(s[1]=(...a)=>e(t).getChatProfilePic&&e(t).getChatProfilePic(...a))},r(l.trans("Sync Profile")),1),o("div",ee,[o("form",{onSubmit:I(C,["prevent"]),class:"flex items-center gap-2 text-lg"},[b.value?R((n(),d("input",{key:1,type:"text",class:"input","onUpdate:modelValue":s[2]||(s[2]=a=>e(i).name=a)},null,512)),[[D,e(i).name]]):(n(),d("span",te,r(((x=e(t).activeConversation)==null?void 0:x.name)??e(t).activeConversation.id.split("@")[0].substring(2)),1)),b.value?(n(),m(E,{key:3,class:"btn btn-primary p-3",onClick:C,processing:e(i).processing},{default:q(()=>[v(e(c),{icon:"bx:check"})]),_:1},8,["processing"])):(n(),m(e(c),{key:2,icon:"bx:edit",class:"cursor-pointer text-primary-500",onClick:s[3]||(s[3]=a=>b.value=!0)}))],32),e(t).getConversationType()==="number"?(n(),d(g,{key:0},[A(r(e(t).activeConversation.id.split("@")[0].substring(2)),1)],64)):z("",!0),e(t).getConversationType()==="group"?(n(),d(g,{key:1},[o("p",se,r((_=e(t).activeConversation.groupMetadata)==null?void 0:_.desc),1),o("p",oe,[e(t).loading.groupMetadata?(n(),d("span",ne,r(l.trans("Loading...")),1)):(n(),d("span",ae,r(((h=e(t).activeConversation.groupMetadata)==null?void 0:h.size)??0)+" "+r(l.trans("Members")),1))]),o("div",ie,[o("ul",null,[(n(!0),d(g,null,G((w=e(t).activeConversation.groupMetadata)==null?void 0:w.participants,a=>(n(),d("li",{key:a.id},r(a.id.split("@")[0].substring(2)),1))),128))]),o("button",{class:"btn btn-sm btn-secondary w-full",type:"button",onClick:s[4]||(s[4]=a=>{var p;return e(L)((p=e(t).activeConversation.groupMetadata)==null?void 0:p.participants.map(O=>O.id).join(", "))})},r(l.trans("Copy")),1)])],64)):z("",!0)])]),o("div",re,[o("div",null,[o("div",le,[o("span",de,r(l.trans("Badge"))+":",1),(S=e(t).activeConversation)!=null&&S.badge_id?(n(),d(g,{key:0},[o("span",{class:"rounded p-0 px-2 text-sm text-white",style:H({background:(B=e(t).getBadge((N=e(t).activeConversation)==null?void 0:N.badge_id))==null?void 0:B.color})},r(($=e(t).getBadge((M=e(t).activeConversation)==null?void 0:M.badge_id))==null?void 0:$.text),5),v(e(c),{icon:"bx:edit",class:"cursor-pointer",onClick:s[5]||(s[5]=a=>e(y).open("addBadgeModal"))}),v(e(c),{icon:"bx:trash",onClick:s[6]||(s[6]=a=>{var p;return F((p=e(t).activeConversation)==null?void 0:p.id)}),class:"cursor-pointer text-danger-700"})],64)):(n(),m(e(c),{key:1,icon:"bx:plus",onClick:s[7]||(s[7]=a=>e(y).open("addBadgeModal")),class:"cursor-pointer"}))]),o("div",ce,[o("p",null,r(l.trans("Note")),1),u.value?(n(),m(e(c),{key:0,icon:"bx:x",class:"cursor-pointer text-xl",onClick:s[8]||(s[8]=a=>u.value=!1)})):(n(),m(e(c),{key:1,icon:"bx:edit",class:"cursor-pointer",onClick:s[9]||(s[9]=a=>u.value=!0)}))]),u.value?(n(),d("div",ue,[R(o("textarea",{class:"textarea","onUpdate:modelValue":s[10]||(s[10]=a=>e(i).note=a),placeholder:"Enter note here"},null,512),[[D,e(i).note]]),v(E,{processing:e(i).processing,onClick:U,"btn-text":l.trans("Save"),class:"w-full"},null,8,["processing","btn-text"])])):(n(),d("div",pe,[(j=e(t).activeConversation)!=null&&j.description?(n(),d("p",ve,r((P=e(t).activeConversation)==null?void 0:P.description),1)):(n(),d("div",me,[o("div",be,[o("p",ge,r(l.trans("Note not set yet")),1),o("button",{class:"btn btn-sm btn-primary",onClick:s[11]||(s[11]=a=>u.value=!0)},r(l.trans("Set a Note")),1)])]))]))])])],2)}}};export{Ne as default};
